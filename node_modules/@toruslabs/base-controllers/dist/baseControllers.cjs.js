/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ 758:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(628);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(201);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(685);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(627);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(840);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(528);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(195);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(33);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7__);







function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

/**
 * Controller class that provides configuration, state management, and subscriptions
 */
var BaseController = /*#__PURE__*/function (_SafeEventEmitter) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(BaseController, _SafeEventEmitter);
  var _super = _createSuper(BaseController);
  /**
   * Default options used to configure this controller
   */

  /**
   * Default state set on this controller
   */

  /**
   * Determines if listeners are notified of state changes
   */

  /**
   * Name of this controller used during composition
   */

  /**
   * Creates a BaseController instance. Both initial state and initial
   * configuration options are merged with defaults upon initialization.
   *
   * @param config - Initial options used to configure this controller
   * @param state - Initial state to set on this controller
   */
  function BaseController(_ref) {
    var _this;
    var _ref$config = _ref.config,
      config = _ref$config === void 0 ? {} : _ref$config,
      _ref$state = _ref.state,
      state = _ref$state === void 0 ? {} : _ref$state;
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, BaseController);
    _this = _super.call(this);
    // Use assign since generics can't be spread: https://git.io/vpRhY
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "defaultConfig", {});
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "defaultState", {});
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "disabled", false);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "name", "BaseController");
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "initialConfig", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "initialState", void 0);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "internalConfig", _this.defaultConfig);
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "internalState", _this.defaultState);
    _this.initialState = state;
    _this.initialConfig = config;
    return _this;
  }

  /**
   * Retrieves current controller configuration options
   *
   * @returns - Current configuration
   */
  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(BaseController, [{
    key: "config",
    get: function get() {
      return this.internalConfig;
    }

    /**
     * Retrieves current controller state
     *
     * @returns - Current state
     */
  }, {
    key: "state",
    get: function get() {
      return this.internalState;
    }

    /**
     * Updates controller configuration
     *
     * @param config - New configuration options
     * @param overwrite - Overwrite config instead of merging
     * @param fullUpdate - Boolean that defines if the update is partial or not
     */
  }, {
    key: "configure",
    value: function configure(config) {
      var overwrite = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var fullUpdate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;
      if (fullUpdate) {
        this.internalConfig = overwrite ? config : Object.assign(this.internalConfig, config);
        for (var key in this.internalConfig) {
          if (typeof this.internalConfig[key] !== "undefined") {
            this[key] = this.internalConfig[key];
          }
        }
      } else {
        for (var _key in config) {
          /* istanbul ignore else */
          if (typeof this.internalConfig[_key] !== "undefined") {
            this.internalConfig[_key] = config[_key];
            this[_key] = config[_key];
          }
        }
      }
    }

    /**
     * Updates controller state
     *
     * @param state - New state
     * @param overwrite - Overwrite state instead of merging
     */
  }, {
    key: "update",
    value: function update(state) {
      var overwrite = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      this.internalState = overwrite ? _objectSpread({}, state) : _objectSpread(_objectSpread({}, this.internalState), state);
      this.emit("store", this.internalState);
    }

    /**
     * Enables the controller. This sets each config option as a member
     * variable on this instance and triggers any defined setters. This
     * also sets initial state and triggers any listeners.
     *
     * @returns - This controller instance
     */
  }, {
    key: "initialize",
    value: function initialize() {
      this.internalState = this.defaultState;
      this.internalConfig = this.defaultConfig;
      this.configure(this.initialConfig);
      this.update(this.initialState);
      return this;
    }
  }]);
  return BaseController;
}(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7__.SafeEventEmitter);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (BaseController);

/***/ }),

/***/ 781:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "I": () => (/* binding */ BaseBlockTracker)
});

// EXTERNAL MODULE: external "@babel/runtime/helpers/asyncToGenerator"
var asyncToGenerator_ = __webpack_require__(798);
var asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/classCallCheck"
var classCallCheck_ = __webpack_require__(628);
var classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/createClass"
var createClass_ = __webpack_require__(201);
var createClass_default = /*#__PURE__*/__webpack_require__.n(createClass_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/assertThisInitialized"
var assertThisInitialized_ = __webpack_require__(685);
var assertThisInitialized_default = /*#__PURE__*/__webpack_require__.n(assertThisInitialized_);
;// CONCATENATED MODULE: external "@babel/runtime/helpers/get"
const get_namespaceObject = require("@babel/runtime/helpers/get");
var get_default = /*#__PURE__*/__webpack_require__.n(get_namespaceObject);
// EXTERNAL MODULE: external "@babel/runtime/helpers/inherits"
var inherits_ = __webpack_require__(627);
var inherits_default = /*#__PURE__*/__webpack_require__.n(inherits_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/possibleConstructorReturn"
var possibleConstructorReturn_ = __webpack_require__(840);
var possibleConstructorReturn_default = /*#__PURE__*/__webpack_require__.n(possibleConstructorReturn_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/getPrototypeOf"
var getPrototypeOf_ = __webpack_require__(528);
var getPrototypeOf_default = /*#__PURE__*/__webpack_require__.n(getPrototypeOf_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/defineProperty"
var defineProperty_ = __webpack_require__(195);
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty_);
// EXTERNAL MODULE: external "@babel/runtime/regenerator"
var regenerator_ = __webpack_require__(650);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator_);
// EXTERNAL MODULE: ./src/BaseController.ts
var BaseController = __webpack_require__(758);
;// CONCATENATED MODULE: ./src/Block/BaseBlockTracker.ts










function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

var sec = 1000;
var calculateSum = function calculateSum(accumulator, currentValue) {
  return accumulator + currentValue;
};
var blockTrackerEvents = ["sync", "latest"];
var BaseBlockTracker = /*#__PURE__*/function (_BaseController) {
  inherits_default()(BaseBlockTracker, _BaseController);
  var _super = _createSuper(BaseBlockTracker);
  function BaseBlockTracker(_ref) {
    var _this;
    var _ref$config = _ref.config,
      config = _ref$config === void 0 ? {} : _ref$config,
      _ref$state = _ref.state,
      state = _ref$state === void 0 ? {} : _ref$state;
    classCallCheck_default()(this, BaseBlockTracker);
    _this = _super.call(this, {
      config: config,
      state: state
    });

    // config
    defineProperty_default()(assertThisInitialized_default()(_this), "name", "BaseBlockTracker");
    defineProperty_default()(assertThisInitialized_default()(_this), "_blockResetTimeout", void 0);
    _this.defaultState = {
      _currentBlock: {
        idempotencyKey: ""
      },
      _isRunning: false
    };
    _this.defaultConfig = {
      blockResetDuration: 20 * sec
    };
    _this.initialize();

    // bind functions for internal use
    _this._onNewListener = _this._onNewListener.bind(assertThisInitialized_default()(_this));
    _this._onRemoveListener = _this._onRemoveListener.bind(assertThisInitialized_default()(_this));
    _this._resetCurrentBlock = _this._resetCurrentBlock.bind(assertThisInitialized_default()(_this));

    // listen for handler changes
    _this._setupInternalEvents();
    return _this;
  }
  createClass_default()(BaseBlockTracker, [{
    key: "isRunning",
    value: function isRunning() {
      return this.state._isRunning;
    }
  }, {
    key: "getCurrentBlock",
    value: function getCurrentBlock() {
      return this.state._currentBlock;
    }
  }, {
    key: "getLatestBlock",
    value: function () {
      var _getLatestBlock = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
        var _this2 = this;
        var latestBlock;
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                if (!this.state._currentBlock) {
                  _context.next = 2;
                  break;
                }
                return _context.abrupt("return", this.state._currentBlock);
              case 2:
                _context.next = 4;
                return new Promise(function (resolve) {
                  _this2.once("latest", function (newState) {
                    if (newState._currentBlock) {
                      resolve(newState._currentBlock);
                    }
                  });
                });
              case 4:
                latestBlock = _context.sent;
                return _context.abrupt("return", latestBlock);
              case 6:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));
      function getLatestBlock() {
        return _getLatestBlock.apply(this, arguments);
      }
      return getLatestBlock;
    }() // dont allow module consumer to remove our internal event listeners
  }, {
    key: "removeAllListeners",
    value: function removeAllListeners(eventName) {
      if (eventName) {
        get_default()(getPrototypeOf_default()(BaseBlockTracker.prototype), "removeAllListeners", this).call(this, eventName);
      } else {
        get_default()(getPrototypeOf_default()(BaseBlockTracker.prototype), "removeAllListeners", this).call(this);
      }
      // re-add internal events
      this._setupInternalEvents();
      // trigger stop check just in case
      this._onRemoveListener();
      return this;
    }

    /**
     * To be implemented in subclass.
     */
  }, {
    key: "_start",
    value: function _start() {
      // default behavior is noop
    }

    /**
     * To be implemented in subclass.
     */
  }, {
    key: "_end",
    value: function _end() {
      // default behavior is noop
    }
  }, {
    key: "_newPotentialLatest",
    value: function _newPotentialLatest(newBlock) {
      var currentBlock = this.state._currentBlock;
      // only update if blok number is higher
      if (currentBlock && newBlock.idempotencyKey === currentBlock.idempotencyKey) {
        return;
      }
      this._setCurrentBlock(newBlock);
    }
  }, {
    key: "_setupInternalEvents",
    value: function _setupInternalEvents() {
      // first remove listeners for idempotency
      this.removeListener("newListener", this._onNewListener);
      this.removeListener("removeListener", this._onRemoveListener);
      // then add them
      this.on("removeListener", this._onRemoveListener);
      this.on("newListener", this._onNewListener);
    }
  }, {
    key: "_onNewListener",
    value: function _onNewListener() {
      this._maybeStart();
    }
  }, {
    key: "_onRemoveListener",
    value: function _onRemoveListener() {
      // `removeListener` is called *after* the listener is removed
      if (this._getBlockTrackerEventCount() > 0) {
        return;
      }
      this._maybeEnd();
    }
  }, {
    key: "_maybeStart",
    value: function _maybeStart() {
      if (this.state._isRunning) {
        return;
      }
      this.state._isRunning = true;
      // cancel setting latest block to stale
      this._cancelBlockResetTimeout();
      this._start();
    }
  }, {
    key: "_maybeEnd",
    value: function _maybeEnd() {
      if (!this.state._isRunning) {
        return;
      }
      this.state._isRunning = false;
      this._setupBlockResetTimeout();
      this._end();
    }
  }, {
    key: "_getBlockTrackerEventCount",
    value: function _getBlockTrackerEventCount() {
      var _this3 = this;
      return blockTrackerEvents.map(function (eventName) {
        return _this3.listenerCount(eventName);
      }).reduce(calculateSum);
    }
  }, {
    key: "_setCurrentBlock",
    value: function _setCurrentBlock(newBlock) {
      var oldBlock = this.state._currentBlock;
      this.update({
        _currentBlock: newBlock
      });
      this.emit("latest", newBlock);
      this.emit("sync", {
        oldBlock: oldBlock,
        newBlock: newBlock
      });
    }
  }, {
    key: "_setupBlockResetTimeout",
    value: function _setupBlockResetTimeout() {
      // clear any existing timeout
      this._cancelBlockResetTimeout();
      // clear latest block when stale
      this._blockResetTimeout = setTimeout(this._resetCurrentBlock, this.config.blockResetDuration);

      // nodejs - dont hold process open
      if (this._blockResetTimeout.unref) {
        this._blockResetTimeout.unref();
      }
    }
  }, {
    key: "_cancelBlockResetTimeout",
    value: function _cancelBlockResetTimeout() {
      if (this._blockResetTimeout) {
        clearTimeout(this._blockResetTimeout);
      }
    }
  }, {
    key: "_resetCurrentBlock",
    value: function _resetCurrentBlock() {
      this.update({
        _currentBlock: {
          idempotencyKey: ""
        }
      });
    }
  }]);
  return BaseBlockTracker;
}(BaseController/* default */.Z);

/***/ }),

/***/ 79:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "W": () => (/* binding */ BaseCurrencyController)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(628);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(201);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(627);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(840);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(528);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(758);





function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

// every ten minutes
var POLLING_INTERVAL = 600000;
var BaseCurrencyController = /*#__PURE__*/function (_BaseController) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_2___default()(BaseCurrencyController, _BaseController);
  var _super = _createSuper(BaseCurrencyController);
  function BaseCurrencyController(_ref) {
    var _this;
    var _ref$config = _ref.config,
      config = _ref$config === void 0 ? {} : _ref$config,
      state = _ref.state;
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, BaseCurrencyController);
    _this = _super.call(this, {
      config: config,
      state: state
    });
    _this.defaultState = {
      currentCurrency: "usd",
      conversionRate: 0,
      conversionDate: "N/A",
      nativeCurrency: "ETH"
    };
    _this.defaultConfig = {
      pollInterval: POLLING_INTERVAL
    };
    _this.initialize();
    return _this;
  }

  //
  // PUBLIC METHODS
  //
  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(BaseCurrencyController, [{
    key: "getNativeCurrency",
    value: function getNativeCurrency() {
      return this.state.nativeCurrency;
    }
  }, {
    key: "setNativeCurrency",
    value: function setNativeCurrency(nativeCurrency) {
      this.update({
        nativeCurrency: nativeCurrency,
        ticker: nativeCurrency
      });
    }
  }, {
    key: "getCurrentCurrency",
    value: function getCurrentCurrency() {
      return this.state.currentCurrency;
    }
  }, {
    key: "setCurrentCurrency",
    value: function setCurrentCurrency(currentCurrency) {
      this.update({
        currentCurrency: currentCurrency
      });
    }

    /**
     * A getter for the conversionRate property
     *
     * @returns The conversion rate from ETH to the selected currency.
     *
     */
  }, {
    key: "getConversionRate",
    value: function getConversionRate() {
      return this.state.conversionRate;
    }
  }, {
    key: "setConversionRate",
    value: function setConversionRate(conversionRate) {
      this.update({
        conversionRate: conversionRate
      });
    }

    /**
     * A getter for the conversionDate property
     *
     * @returns The date at which the conversion rate was set. Expressed in milliseconds since midnight of
     * January 1, 1970
     *
     */
  }, {
    key: "getConversionDate",
    value: function getConversionDate() {
      return this.state.conversionDate;
    }
  }, {
    key: "setConversionDate",
    value: function setConversionDate(conversionDate) {
      this.update({
        conversionDate: conversionDate
      });
    }
  }]);
  return BaseCurrencyController;
}(_BaseController__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z);

/***/ }),

/***/ 784:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "k": () => (/* binding */ BaseEmbedController)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(628);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(201);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(685);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(627);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(840);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(528);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(195);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(33);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(758);
/* harmony import */ var _createSwappableProxy__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(868);
/* harmony import */ var _Network_INetworkController__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(168);
/* harmony import */ var _CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(469);







function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var BaseEmbedController = /*#__PURE__*/function (_BaseController) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(BaseEmbedController, _BaseController);
  var _super = _createSuper(BaseEmbedController);
  function BaseEmbedController(_ref) {
    var _this;
    var _ref$config = _ref.config,
      config = _ref$config === void 0 ? {} : _ref$config,
      state = _ref.state;
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, BaseEmbedController);
    _this = _super.call(this, {
      config: config,
      state: state
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "_communicationProviderProxy", void 0);
    _this.defaultState = {
      buttonPosition: "bottom-right",
      isIFrameFullScreen: true,
      apiKey: "torus-default",
      oauthModalVisibility: false,
      loginInProgress: false,
      dappMetadata: {
        name: "",
        icon: ""
      }
    };
    _this.initialize();
    return _this;
  }

  /**
   * Called by orchestrator once while initializing the class
   * @param handlers - JRPC handlers for provider
   * @returns - provider - Returns the providerProxy
   */
  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(BaseEmbedController, [{
    key: "initializeProvider",
    value: function initializeProvider(handlers) {
      var engine = new _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7__.JRPCEngine();
      var communicationMiddleware = (0,_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_10__/* .createCommunicationMiddleware */ .u_)(handlers);
      engine.push(communicationMiddleware);
      var communicationProvider = (0,_Network_INetworkController__WEBPACK_IMPORTED_MODULE_9__/* .providerFromEngine */ .Xj)(engine);
      this.setCommunicationProvider(communicationProvider);
    }
  }, {
    key: "setCommunicationProvider",
    value: function setCommunicationProvider(communicationProvider) {
      if (this._communicationProviderProxy) {
        // eslint-disable-next-line @typescript-eslint/ban-ts-comment
        // @ts-ignore
        this._communicationProviderProxy.setTarget(communicationProvider);
      } else {
        this._communicationProviderProxy = (0,_createSwappableProxy__WEBPACK_IMPORTED_MODULE_11__/* ["default"] */ .Z)(communicationProvider);
      }
    }
  }]);
  return BaseEmbedController;
}(_BaseController__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z);

/***/ }),

/***/ 469:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "JL": () => (/* binding */ createChangeProviderMiddlewareMiddleware),
/* harmony export */   "QM": () => (/* binding */ createGenericJRPCMiddleware),
/* harmony export */   "u_": () => (/* binding */ createCommunicationMiddleware),
/* harmony export */   "yP": () => (/* binding */ createTopupMiddleware)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(195);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(798);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(650);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(33);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1);





function createChangeProviderMiddlewareMiddleware(_ref) {
  var changeProvider = _ref.changeProvider;
  return (0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_3__.createAsyncMiddleware)( /*#__PURE__*/function () {
    var _ref2 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee(request, response, next) {
      var method;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              method = request.method;
              if (!(method !== _enums__WEBPACK_IMPORTED_MODULE_4__/* .COMMUNICATION_JRPC_METHODS.SET_PROVIDER */ .vU.SET_PROVIDER)) {
                _context.next = 3;
                break;
              }
              return _context.abrupt("return", next());
            case 3:
              if (changeProvider) {
                _context.next = 5;
                break;
              }
              throw new Error("CommunicationMiddleware - opts.changeProvider not provided");
            case 5:
              _context.next = 7;
              return changeProvider(request);
            case 7:
              response.result = _context.sent;
            case 8:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));
    return function (_x, _x2, _x3) {
      return _ref2.apply(this, arguments);
    };
  }());
}
function createTopupMiddleware(_ref3) {
  var topup = _ref3.topup;
  return (0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_3__.createAsyncMiddleware)( /*#__PURE__*/function () {
    var _ref4 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee2(request, response, next) {
      var method;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              method = request.method;
              if (!(method !== _enums__WEBPACK_IMPORTED_MODULE_4__/* .COMMUNICATION_JRPC_METHODS.TOPUP */ .vU.TOPUP)) {
                _context2.next = 3;
                break;
              }
              return _context2.abrupt("return", next());
            case 3:
              if (topup) {
                _context2.next = 5;
                break;
              }
              throw new Error("CommunicationMiddleware - opts.topup not provided");
            case 5:
              _context2.next = 7;
              return topup(request);
            case 7:
              response.result = _context2.sent;
            case 8:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));
    return function (_x4, _x5, _x6) {
      return _ref4.apply(this, arguments);
    };
  }());
}
function createGenericJRPCMiddleware(targetMethod, handler) {
  return (0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_3__.createAsyncMiddleware)( /*#__PURE__*/function () {
    var _ref5 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().mark(function _callee3(request, response, next) {
      var method, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default().wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              method = request.method;
              if (!(method !== targetMethod)) {
                _context3.next = 3;
                break;
              }
              return _context3.abrupt("return", next());
            case 3:
              if (handler) {
                _context3.next = 5;
                break;
              }
              throw new Error("CommunicationMiddleware - ".concat(targetMethod, " not provided"));
            case 5:
              _context3.next = 7;
              return handler(request);
            case 7:
              result = _context3.sent;
              if (result) {
                _context3.next = 10;
                break;
              }
              return _context3.abrupt("return", next());
            case 10:
              response.result = result;
              return _context3.abrupt("return", undefined);
            case 12:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));
    return function (_x7, _x8, _x9) {
      return _ref5.apply(this, arguments);
    };
  }());
}
function createCommunicationMiddleware(providerHandlers) {
  var _createScaffoldMiddle;
  var getUserInfo = providerHandlers.getUserInfo,
    getWalletInstanceId = providerHandlers.getWalletInstanceId,
    topup = providerHandlers.topup,
    logout = providerHandlers.logout,
    changeProvider = providerHandlers.changeProvider,
    setIFrameStatus = providerHandlers.setIFrameStatus,
    handleWindowRpc = providerHandlers.handleWindowRpc,
    getProviderState = providerHandlers.getProviderState,
    loginWithPrivateKey = providerHandlers.loginWithPrivateKey;
  return (0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_3__.mergeMiddleware)([createChangeProviderMiddlewareMiddleware({
    changeProvider: changeProvider
  }), createTopupMiddleware({
    topup: topup
  }), (0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_3__.createScaffoldMiddleware)((_createScaffoldMiddle = {}, _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_createScaffoldMiddle, _enums__WEBPACK_IMPORTED_MODULE_4__/* .COMMUNICATION_JRPC_METHODS.LOGOUT */ .vU.LOGOUT, logout), _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_createScaffoldMiddle, _enums__WEBPACK_IMPORTED_MODULE_4__/* .COMMUNICATION_JRPC_METHODS.WALLET_INSTANCE_ID */ .vU.WALLET_INSTANCE_ID, getWalletInstanceId), _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_createScaffoldMiddle, _enums__WEBPACK_IMPORTED_MODULE_4__/* .COMMUNICATION_JRPC_METHODS.USER_INFO */ .vU.USER_INFO, getUserInfo), _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_createScaffoldMiddle, _enums__WEBPACK_IMPORTED_MODULE_4__/* .COMMUNICATION_JRPC_METHODS.IFRAME_STATUS */ .vU.IFRAME_STATUS, setIFrameStatus), _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_createScaffoldMiddle, _enums__WEBPACK_IMPORTED_MODULE_4__/* .COMMUNICATION_JRPC_METHODS.OPENED_WINDOW */ .vU.OPENED_WINDOW, handleWindowRpc), _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_createScaffoldMiddle, _enums__WEBPACK_IMPORTED_MODULE_4__/* .COMMUNICATION_JRPC_METHODS.CLOSED_WINDOW */ .vU.CLOSED_WINDOW, handleWindowRpc), _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_0___default()(_createScaffoldMiddle, _enums__WEBPACK_IMPORTED_MODULE_4__/* .COMMUNICATION_JRPC_METHODS.GET_PROVIDER_STATE */ .vU.GET_PROVIDER_STATE, getProviderState), _createScaffoldMiddle)), createGenericJRPCMiddleware(_enums__WEBPACK_IMPORTED_MODULE_4__/* .COMMUNICATION_JRPC_METHODS.LOGIN_WITH_PRIVATE_KEY */ .vU.LOGIN_WITH_PRIVATE_KEY, loginWithPrivateKey)]);
}

/***/ }),

/***/ 745:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(201);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(628);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(685);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(627);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(840);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(528);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(195);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(33);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(1);







function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }


var CommunicationWindowManager = /*#__PURE__*/function (_SafeEventEmitter) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(CommunicationWindowManager, _SafeEventEmitter);
  var _super = _createSuper(CommunicationWindowManager);
  function CommunicationWindowManager() {
    var _this;
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this, CommunicationWindowManager);
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    _this = _super.call.apply(_super, [this].concat(args));
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "handleWindowRpc", function (request, response, next, end) {
      var method = request.method,
        params = request.params;
      if (method === _enums__WEBPACK_IMPORTED_MODULE_8__/* .COMMUNICATION_JRPC_METHODS.OPENED_WINDOW */ .vU.OPENED_WINDOW) {
        var windowId = params.windowId;
        // I've been informed that a window has been opened
        _this.emit("".concat(windowId, ":opened"));
        response.result = true;
        end();
      } else if (method === _enums__WEBPACK_IMPORTED_MODULE_8__/* .COMMUNICATION_JRPC_METHODS.CLOSED_WINDOW */ .vU.CLOSED_WINDOW) {
        var _windowId = params.windowId;
        // I've been informed that a window has been closed
        _this.emit("".concat(_windowId, ":closed"));
        response.result = true;
        end();
      } else {
        next();
      }
    });
    return _this;
  }
  return _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_0___default()(CommunicationWindowManager);
}(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_7__.SafeEventEmitter);
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CommunicationWindowManager);

/***/ }),

/***/ 818:
/***/ (() => {



/***/ }),

/***/ 608:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "W": () => (/* binding */ BaseKeyringController)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(628);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(201);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(627);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(840);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(528);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(758);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(883);





function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3___default()(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }


var BaseKeyringController = /*#__PURE__*/function (_BaseController) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_2___default()(BaseKeyringController, _BaseController);
  var _super = _createSuper(BaseKeyringController);
  function BaseKeyringController(_ref) {
    var _state$wallets;
    var _this;
    var _ref$config = _ref.config,
      config = _ref$config === void 0 ? {} : _ref$config,
      state = _ref.state;
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, BaseKeyringController);
    _this = _super.call(this, {
      config: config,
      state: state
    });
    _this.defaultState = {
      wallets: (_state$wallets = state.wallets) !== null && _state$wallets !== void 0 ? _state$wallets : []
    };
    _this.initialize();
    return _this;
  }

  // for signing auth message
  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(BaseKeyringController, [{
    key: "signAuthMessage",
    value: function signAuthMessage(address, message) {
      var keyring = this.state.wallets.find(function (x) {
        return x.address === address;
      });
      if (!keyring) {
        throw new Error("key does not exist");
      }
      var hashedMessage = (0,_utils__WEBPACK_IMPORTED_MODULE_6__/* .hashMessage */ .rj)(message).toString("hex");
      var rawMessageSig = (0,_utils__WEBPACK_IMPORTED_MODULE_6__/* .signMessage */ .l)(keyring.privateKey, hashedMessage);
      return rawMessageSig;
    }
  }]);
  return BaseKeyringController;
}(_BaseController__WEBPACK_IMPORTED_MODULE_5__/* ["default"] */ .Z);

/***/ }),

/***/ 168:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "HL": () => (/* binding */ createRandomId),
  "zR": () => (/* binding */ providerAsMiddleware),
  "Xj": () => (/* binding */ providerFromEngine),
  "ZY": () => (/* binding */ providerFromMiddleware)
});

// EXTERNAL MODULE: external "@babel/runtime/helpers/defineProperty"
var defineProperty_ = __webpack_require__(195);
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/asyncToGenerator"
var asyncToGenerator_ = __webpack_require__(798);
var asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator_);
// EXTERNAL MODULE: external "@babel/runtime/regenerator"
var regenerator_ = __webpack_require__(650);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator_);
// EXTERNAL MODULE: external "@toruslabs/openlogin-jrpc"
var openlogin_jrpc_ = __webpack_require__(33);
// EXTERNAL MODULE: external "eth-rpc-errors"
var external_eth_rpc_errors_ = __webpack_require__(19);
;// CONCATENATED MODULE: external "json-rpc-random-id"
const external_json_rpc_random_id_namespaceObject = require("json-rpc-random-id");
var external_json_rpc_random_id_default = /*#__PURE__*/__webpack_require__.n(external_json_rpc_random_id_namespaceObject);
;// CONCATENATED MODULE: ./src/Network/INetworkController.ts


function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }




var createRandomId = external_json_rpc_random_id_default()();
function providerFromEngine(engine) {
  var provider = new openlogin_jrpc_.SafeEventEmitter();
  // handle both rpc send methods
  provider.sendAsync = /*#__PURE__*/function () {
    var _ref = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(req) {
      var res, _res$error, _res$error2, _err;
      return regenerator_default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _context.next = 2;
              return engine.handle(req);
            case 2:
              res = _context.sent;
              if (!res.error) {
                _context.next = 6;
                break;
              }
              _err = (0,external_eth_rpc_errors_.serializeError)(res.error, {
                fallbackError: {
                  message: ((_res$error = res.error) === null || _res$error === void 0 ? void 0 : _res$error.message) || res.error.toString(),
                  code: ((_res$error2 = res.error) === null || _res$error2 === void 0 ? void 0 : _res$error2.code) || -32603
                }
              });
              throw external_eth_rpc_errors_.ethErrors.rpc.internal(_err);
            case 6:
              return _context.abrupt("return", res.result);
            case 7:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));
    return function (_x) {
      return _ref.apply(this, arguments);
    };
  }();
  // eslint-disable-next-line @typescript-eslint/no-explicit-any
  provider.send = function (req, callback) {
    if (typeof callback !== "function") {
      throw new Error('Must provide callback to "send" method.');
    }
    engine.handle(req, callback);
  };
  // forward notifications
  if (engine.on) {
    engine.on("notification", function (message) {
      provider.emit("data", null, message);
    });
  }
  provider.request = /*#__PURE__*/function () {
    var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(args) {
      var req, res;
      return regenerator_default().wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              req = _objectSpread(_objectSpread({}, args), {}, {
                id: createRandomId(),
                jsonrpc: "2.0"
              });
              _context2.next = 3;
              return provider.sendAsync(req);
            case 3:
              res = _context2.sent;
              return _context2.abrupt("return", res);
            case 5:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));
    return function (_x2) {
      return _ref2.apply(this, arguments);
    };
  }();
  return provider;
}
function providerFromMiddleware(middleware) {
  var engine = new openlogin_jrpc_.JRPCEngine();
  engine.push(middleware);
  var provider = providerFromEngine(engine);
  return provider;
}
function providerAsMiddleware(provider) {
  return /*#__PURE__*/function () {
    var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee3(req, res, _next, end) {
      var _providerRes;
      return regenerator_default().wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              _context3.prev = 0;
              _context3.next = 3;
              return provider.sendAsync(req);
            case 3:
              _providerRes = _context3.sent;
              res.result = _providerRes;
              return _context3.abrupt("return", end());
            case 8:
              _context3.prev = 8;
              _context3.t0 = _context3["catch"](0);
              return _context3.abrupt("return", end(_context3.t0.message));
            case 11:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3, null, [[0, 8]]);
    }));
    return function (_x3, _x4, _x5, _x6) {
      return _ref3.apply(this, arguments);
    };
  }();
}

/***/ }),

/***/ 466:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "D": () => (/* binding */ createFetchConfigFromReq),
/* harmony export */   "v": () => (/* binding */ createFetchMiddleware)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(798);
/* harmony import */ var _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(650);
/* harmony import */ var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(33);
/* harmony import */ var _toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var eth_rpc_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(19);
/* harmony import */ var eth_rpc_errors__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(eth_rpc_errors__WEBPACK_IMPORTED_MODULE_3__);




var RETRIABLE_ERRORS = [
// ignore server overload errors
"Gateway timeout", "ETIMEDOUT",
// ignore server sent html error pages
// or truncated json responses
"failed to parse response body",
// ignore errors where http req failed to establish
"Failed to fetch"];
function checkForHttpErrors(fetchRes) {
  // check for errors
  switch (fetchRes.status) {
    case 405:
      throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_3__.ethErrors.rpc.methodNotFound();
    case 418:
      throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_3__.ethErrors.rpc.internal({
        message: "Request is being rate limited."
      });
    case 503:
    case 504:
      throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_3__.ethErrors.rpc.internal({
        message: "Gateway timeout. The request took too long to process." + "This can happen when querying over too wide a block range."
      });
    default:
      break;
  }
}
function timeout(duration) {
  return new Promise(function (resolve) {
    setTimeout(resolve, duration);
  });
}
function parseResponse(fetchRes, body) {
  // check for error code
  if (fetchRes.status !== 200) {
    throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_3__.ethErrors.rpc.internal({
      message: "Non-200 status code: '".concat(fetchRes.status, "'"),
      data: body
    });
  }
  // check for rpc error
  if (body.error) {
    throw eth_rpc_errors__WEBPACK_IMPORTED_MODULE_3__.ethErrors.rpc.internal({
      data: body.error
    });
  }
  // return successful result
  return body.result;
}
function createFetchConfigFromReq(_ref) {
  var req = _ref.req,
    rpcTarget = _ref.rpcTarget,
    originHttpHeaderKey = _ref.originHttpHeaderKey;
  var parsedUrl = new URL(rpcTarget);

  // prepare payload
  // copy only canonical json rpc properties
  var payload = {
    id: req.id,
    jsonrpc: req.jsonrpc,
    method: req.method,
    params: req.params
  };

  // extract 'origin' parameter from request
  var originDomain = req.origin;

  // serialize request body
  var serializedPayload = JSON.stringify(payload);

  // configure fetch params
  var fetchParams = {
    method: "POST",
    headers: {
      Accept: "application/json",
      "Content-Type": "application/json"
    },
    body: serializedPayload
  };

  // optional: add request origin as header
  if (originHttpHeaderKey && originDomain) {
    fetchParams.headers[originHttpHeaderKey] = originDomain;
  }
  return {
    fetchUrl: parsedUrl.href,
    fetchParams: fetchParams
  };
}
function createFetchMiddleware(_ref2) {
  var rpcTarget = _ref2.rpcTarget,
    originHttpHeaderKey = _ref2.originHttpHeaderKey;
  return (0,_toruslabs_openlogin_jrpc__WEBPACK_IMPORTED_MODULE_2__.createAsyncMiddleware)( /*#__PURE__*/function () {
    var _ref3 = _babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0___default()( /*#__PURE__*/_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().mark(function _callee(req, res, _next) {
      var _createFetchConfigFro, fetchUrl, fetchParams, maxAttempts, retryInterval, attempt, fetchRes, fetchBody, result;
      return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default().wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              _createFetchConfigFro = createFetchConfigFromReq({
                req: req,
                rpcTarget: rpcTarget,
                originHttpHeaderKey: originHttpHeaderKey
              }), fetchUrl = _createFetchConfigFro.fetchUrl, fetchParams = _createFetchConfigFro.fetchParams; // attempt request multiple times
              maxAttempts = 5;
              retryInterval = 1000;
              attempt = 0;
            case 4:
              if (!(attempt < maxAttempts)) {
                _context.next = 26;
                break;
              }
              _context.prev = 5;
              _context.next = 8;
              return fetch(fetchUrl, fetchParams);
            case 8:
              fetchRes = _context.sent;
              // check for http errrors
              checkForHttpErrors(fetchRes);
              // parse response body
              _context.next = 12;
              return fetchRes.json();
            case 12:
              fetchBody = _context.sent;
              result = parseResponse(fetchRes, fetchBody); // set result and exit retry loop
              res.result = result;
              return _context.abrupt("return");
            case 18:
              _context.prev = 18;
              _context.t0 = _context["catch"](5);
              (function () {
                var errMsg = _context.t0.toString();
                var isRetriable = RETRIABLE_ERRORS.some(function (phrase) {
                  return errMsg.includes(phrase);
                });
                // re-throw error if not retriable
                if (!isRetriable) {
                  throw _context.t0;
                }
              })();
            case 21:
              _context.next = 23;
              return timeout(retryInterval);
            case 23:
              attempt++;
              _context.next = 4;
              break;
            case 26:
            case "end":
              return _context.stop();
          }
        }
      }, _callee, null, [[5, 18]]);
    }));
    return function (_x, _x2, _x3) {
      return _ref3.apply(this, arguments);
    };
  }());
}

/***/ }),

/***/ 994:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "y": () => (/* binding */ createLoggerMiddleware)
/* harmony export */ });
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(485);
/* harmony import */ var loglevel__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(loglevel__WEBPACK_IMPORTED_MODULE_0__);

function createLoggerMiddleware(options) {
  return function loggerMiddleware(request, response, next) {
    next(function (callback) {
      if (response.error) {
        loglevel__WEBPACK_IMPORTED_MODULE_0___default().warn("Error in RPC response:\n", response);
      }
      if (request.isTorusInternal) return;
      loglevel__WEBPACK_IMPORTED_MODULE_0___default().info("RPC (".concat(options.origin, "):"), request, "->", response);
      callback();
    });
  };
}

/***/ }),

/***/ 152:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "x": () => (/* binding */ createOriginMiddleware)
/* harmony export */ });
function createOriginMiddleware(options) {
  return function originMiddleware(request, _, next) {
    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    request.origin = options.origin;
    next();
  };
}

/***/ }),

/***/ 964:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "K4": () => (/* reexport */ BroadcastChannelHandler),
  "XQ": () => (/* reexport */ Popup_PopupHandler),
  "lQ": () => (/* reexport */ PopupStoreChannel),
  "LC": () => (/* reexport */ Popup_PopupWithBcHandler),
  "ZZ": () => (/* reexport */ RedirectHandler),
  "Ej": () => (/* reexport */ Popup_StreamWindow)
});

// EXTERNAL MODULE: external "@babel/runtime/helpers/asyncToGenerator"
var asyncToGenerator_ = __webpack_require__(798);
var asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/classCallCheck"
var classCallCheck_ = __webpack_require__(628);
var classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/createClass"
var createClass_ = __webpack_require__(201);
var createClass_default = /*#__PURE__*/__webpack_require__.n(createClass_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/defineProperty"
var defineProperty_ = __webpack_require__(195);
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty_);
// EXTERNAL MODULE: external "@babel/runtime/regenerator"
var regenerator_ = __webpack_require__(650);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator_);
;// CONCATENATED MODULE: external "@toruslabs/broadcast-channel"
const broadcast_channel_namespaceObject = require("@toruslabs/broadcast-channel");
// EXTERNAL MODULE: ./src/enums.ts
var enums = __webpack_require__(1);
// EXTERNAL MODULE: ./src/utils/index.ts + 1 modules
var utils = __webpack_require__(883);
;// CONCATENATED MODULE: ./src/Popup/BroadcastChannelHandler.ts








var BroadcastChannelHandler = /*#__PURE__*/function () {
  function BroadcastChannelHandler(channelPrefix) {
    classCallCheck_default()(this, BroadcastChannelHandler);
    defineProperty_default()(this, "bc", void 0);
    defineProperty_default()(this, "channel", void 0);
    var queryParameters = new URLSearchParams(window.location.search);
    var instanceId = queryParameters.get("instanceId");
    this.channel = "".concat(channelPrefix, "_").concat(instanceId);
    this.bc = new broadcast_channel_namespaceObject.BroadcastChannel(this.channel, utils/* broadcastChannelOptions */.aN);
  }
  createClass_default()(BroadcastChannelHandler, [{
    key: "getMessageFromChannel",
    value: function getMessageFromChannel() {
      var _this = this;
      return new Promise(function (resolve, reject) {
        _this.bc.addEventListener("message", /*#__PURE__*/function () {
          var _ref = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(ev) {
            return regenerator_default().wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    _this.bc.close();
                    if (ev.error) {
                      reject(ev.error);
                    } else {
                      resolve(ev.data);
                    }
                  case 2:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee);
          }));
          return function (_x) {
            return _ref.apply(this, arguments);
          };
        }());
        _this.bc.postMessage({
          data: {
            type: enums/* POPUP_LOADED */.AA
          }
        });
      });
    }
  }]);
  return BroadcastChannelHandler;
}();

// EXTERNAL MODULE: external "@babel/runtime/helpers/inherits"
var inherits_ = __webpack_require__(627);
var inherits_default = /*#__PURE__*/__webpack_require__.n(inherits_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/possibleConstructorReturn"
var possibleConstructorReturn_ = __webpack_require__(840);
var possibleConstructorReturn_default = /*#__PURE__*/__webpack_require__.n(possibleConstructorReturn_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/getPrototypeOf"
var getPrototypeOf_ = __webpack_require__(528);
var getPrototypeOf_default = /*#__PURE__*/__webpack_require__.n(getPrototypeOf_);
// EXTERNAL MODULE: ./src/BaseController.ts
var BaseController = __webpack_require__(758);
// EXTERNAL MODULE: external "@babel/runtime/helpers/assertThisInitialized"
var assertThisInitialized_ = __webpack_require__(685);
var assertThisInitialized_default = /*#__PURE__*/__webpack_require__.n(assertThisInitialized_);
// EXTERNAL MODULE: external "loglevel"
var external_loglevel_ = __webpack_require__(485);
var external_loglevel_default = /*#__PURE__*/__webpack_require__.n(external_loglevel_);
;// CONCATENATED MODULE: ./src/Popup/StreamWindow.ts









function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





var StreamWindow = /*#__PURE__*/function (_BaseController) {
  inherits_default()(StreamWindow, _BaseController);
  var _super = _createSuper(StreamWindow);
  // if window has been closed by users

  function StreamWindow(_ref) {
    var _this;
    var config = _ref.config,
      _ref$state = _ref.state,
      state = _ref$state === void 0 ? {} : _ref$state;
    classCallCheck_default()(this, StreamWindow);
    _this = _super.call(this, {
      config: config,
      state: state
    });
    defineProperty_default()(assertThisInitialized_default()(_this), "closed", false);
    _this.initialize();
    return _this;
  }
  createClass_default()(StreamWindow, [{
    key: "open",
    value: function () {
      var _open = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee4() {
        var _this2 = this;
        return regenerator_default().wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                return _context4.abrupt("return", new Promise(function (resolve, reject) {
                  var _this2$config = _this2.config,
                    communicationEngine = _this2$config.communicationEngine,
                    communicationWindowManager = _this2$config.communicationWindowManager;
                  var popupSuccess = false;
                  communicationWindowManager.once("".concat(_this2.state.windowId, ":closed"), function () {
                    _this2.closed = true;
                  });

                  // Window is not open yet
                  if (!_this2.state.windowId) {
                    _this2.update({
                      windowId: (0,utils/* randomId */.kb)()
                    });
                    communicationWindowManager.once("".concat(_this2.state.windowId, ":opened"), function () {
                      resolve(_this2);
                    });

                    // Tell the other party to create a window by prompting the user to click on something
                    communicationEngine.emit("notification", {
                      method: enums/* COMMUNICATION_NOTIFICATIONS.CREATE_WINDOW */.Nb.CREATE_WINDOW,
                      params: {
                        windowId: _this2.state.windowId,
                        url: _this2.state.url.href
                      }
                    });
                  } else {
                    // Send this window with `windowId` the url to open via bc
                    var bc = new broadcast_channel_namespaceObject.BroadcastChannel(_this2.state.windowId, utils/* broadcastChannelOptions */.aN);
                    bc.addEventListener("message", /*#__PURE__*/function () {
                      var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(ev) {
                        var error, message;
                        return regenerator_default().wrap(function _callee$(_context) {
                          while (1) {
                            switch (_context.prev = _context.next) {
                              case 0:
                                _context.prev = 0;
                                external_loglevel_default().info(ev, "receiving data on channel: ".concat(bc.name));
                                error = ev.error;
                                if (!error) {
                                  _context.next = 6;
                                  break;
                                }
                                // Popup says some error. so, we say it's not really opened
                                reject(new Error(error));
                                return _context.abrupt("return");
                              case 6:
                                message = ev.data.message;
                                if (!(message === enums/* POPUP_LOADED */.AA)) {
                                  _context.next = 13;
                                  break;
                                }
                                popupSuccess = true;
                                _context.next = 11;
                                return bc.postMessage({
                                  data: {
                                    url: _this2.state.url.href,
                                    message: "" // No need of a msg
                                  }
                                });
                              case 11:
                                resolve(_this2);
                                bc.close();
                              case 13:
                                _context.next = 20;
                                break;
                              case 15:
                                _context.prev = 15;
                                _context.t0 = _context["catch"](0);
                                reject(_context.t0);
                                bc.close();
                                // Something went wrong. so, we close that window
                                _this2.close();
                              case 20:
                              case "end":
                                return _context.stop();
                            }
                          }
                        }, _callee, null, [[0, 15]]);
                      }));
                      return function (_x) {
                        return _ref2.apply(this, arguments);
                      };
                    }());

                    // We don't know if the other end is ready to receive this msg. So, we keep writing until it receives and sends back something
                    // we need backoff strategy
                    // we need to wait for first attempt to succeed/fail until the second attempt
                    // If we get 429, we need to wait for a while and then try again

                    var postMsg = /*#__PURE__*/function () {
                      var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2() {
                        var localResponse;
                        return regenerator_default().wrap(function _callee2$(_context2) {
                          while (1) {
                            switch (_context2.prev = _context2.next) {
                              case 0:
                                _context2.next = 2;
                                return bc.postMessage({
                                  data: {
                                    message: enums/* SETUP_COMPLETE */.bJ
                                  }
                                });
                              case 2:
                                localResponse = _context2.sent;
                                return _context2.abrupt("return", localResponse);
                              case 4:
                              case "end":
                                return _context2.stop();
                            }
                          }
                        }, _callee2);
                      }));
                      return function postMsg() {
                        return _ref3.apply(this, arguments);
                      };
                    }();
                    var currentDelay = bc.type === "server" ? 1000 : 200;
                    var recursiveFn = /*#__PURE__*/function () {
                      var _ref4 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee3() {
                        var localResponse, serverResponse;
                        return regenerator_default().wrap(function _callee3$(_context3) {
                          while (1) {
                            switch (_context3.prev = _context3.next) {
                              case 0:
                                if (!(!popupSuccess && !_this2.closed)) {
                                  _context3.next = 9;
                                  break;
                                }
                                _context3.next = 3;
                                return postMsg();
                              case 3:
                                localResponse = _context3.sent;
                                if (bc.type === "server") {
                                  serverResponse = localResponse;
                                  if (serverResponse.status >= 400) {
                                    // We need to wait for a while and then try again
                                    currentDelay = Math.round(currentDelay * 1.5);
                                  }
                                }
                                _context3.next = 7;
                                return (0,utils/* sleep */._v)(currentDelay);
                              case 7:
                                _context3.next = 9;
                                return recursiveFn();
                              case 9:
                              case "end":
                                return _context3.stop();
                            }
                          }
                        }, _callee3);
                      }));
                      return function recursiveFn() {
                        return _ref4.apply(this, arguments);
                      };
                    }();
                    recursiveFn();
                  }
                }));
              case 1:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4);
      }));
      function open() {
        return _open.apply(this, arguments);
      }
      return open;
    }()
  }, {
    key: "close",
    value: function close() {
      var communicationEngine = this.config.communicationEngine;
      communicationEngine.emit("notification", {
        method: enums/* COMMUNICATION_NOTIFICATIONS.CLOSE_WINDOW */.Nb.CLOSE_WINDOW,
        params: {
          windowId: this.state.windowId
        }
      });
    }
  }]);
  return StreamWindow;
}(BaseController/* default */.Z);
/* harmony default export */ const Popup_StreamWindow = (StreamWindow);
;// CONCATENATED MODULE: ./src/Popup/PopupHandler.ts







function PopupHandler_createSuper(Derived) { var hasNativeReflectConstruct = PopupHandler_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }
function PopupHandler_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




/*
Scenarios:
1. Open a normal popup window and no communication with it - Use PopupHandler
2. Open a popup window and communicate with it - Use PopupWithBcHandler (can initiate communication by waiting for window to open or not)

3. If window is already opened, pass in windowId to the popup handler. 
   This will establish communication with the popup window and sends it a new url to redirect to


If you're trying to open a window and it gets blocked (happens if you're in iframe or delay b/w click and opening window),
StreamWindow is invoked and it writes in a channel to display a message to the user

Once user clicks on that modal/dialog, we pre-open the window and pass in the windowId (goes to 3)
*/

/**
 * Handles popup window management.
 * For broadcast channel communication, use url with `instanceId` coded into state parameter.
 * This state parameter will be passed across redirects according to OAuth spec.
 */
var PopupHandler = /*#__PURE__*/function (_BaseController) {
  inherits_default()(PopupHandler, _BaseController);
  var _super = PopupHandler_createSuper(PopupHandler);
  function PopupHandler(_ref) {
    var _this;
    var config = _ref.config,
      state = _ref.state;
    classCallCheck_default()(this, PopupHandler);
    _this = _super.call(this, {
      config: config,
      state: state
    });
    // this.id = randomId()
    // Add in dapp storage key to all popups as a hash parameter
    _this.defaultConfig = {
      dappStorageKey: "",
      features: (0,utils/* getPopupFeatures */.SL)(enums/* FEATURES_DEFAULT_POPUP_WINDOW */.Of),
      target: "_blank",
      communicationEngine: null,
      communicationWindowManager: null
    };
    _this.defaultState = {
      windowTimer: null,
      window: null,
      iClosedWindow: false,
      windowId: "",
      url: state.url
    };
    _this.initialize();
    _this._setupTimer();
    return _this;
  }
  createClass_default()(PopupHandler, [{
    key: "open",
    value: function () {
      var _open = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee() {
        var _this$config, target, features, dappStorageKey, communicationEngine, communicationWindowManager, _this$state, windowId, url, urlHashParams, _localWindow, localWindow;
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                // if window is already open
                _this$config = this.config, target = _this$config.target, features = _this$config.features, dappStorageKey = _this$config.dappStorageKey, communicationEngine = _this$config.communicationEngine, communicationWindowManager = _this$config.communicationWindowManager;
                _this$state = this.state, windowId = _this$state.windowId, url = _this$state.url;
                if (dappStorageKey) {
                  urlHashParams = new URLSearchParams(url.hash.slice(1));
                  urlHashParams.append("dappStorageKey", dappStorageKey);
                  url.hash = urlHashParams.toString();
                  this.update({
                    url: url
                  });
                }
                // No window has been pre-opened
                if (windowId) {
                  _context.next = 8;
                  break;
                }
                // try to open a window first
                _localWindow = window.open(url.href, target, features);
                if (!_localWindow) {
                  // if it's blocked, open StreamWindow
                  _localWindow = new Popup_StreamWindow({
                    config: {
                      communicationEngine: communicationEngine,
                      communicationWindowManager: communicationWindowManager
                    },
                    state: {
                      url: url
                    }
                  });
                  _localWindow.open();
                }
                this.update({
                  window: _localWindow
                });
                return _context.abrupt("return");
              case 8:
                // A window has been pre-opened with a query parameter `windowId`
                localWindow = new Popup_StreamWindow({
                  config: {
                    communicationEngine: communicationEngine,
                    communicationWindowManager: communicationWindowManager
                  },
                  state: {
                    url: url,
                    windowId: windowId
                  }
                });
                this.update({
                  window: localWindow
                });
                _context.next = 12;
                return localWindow.open();
              case 12:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));
      function open() {
        return _open.apply(this, arguments);
      }
      return open;
    }()
  }, {
    key: "close",
    value: function close() {
      this.update({
        iClosedWindow: true
      });
      var window = this.state.window;
      if (window) window.close();
    }
  }, {
    key: "_setupTimer",
    value: function _setupTimer() {
      var _this2 = this;
      var timer = window.setInterval(function () {
        var _this2$state = _this2.state,
          window = _this2$state.window,
          windowTimer = _this2$state.windowTimer,
          iClosedWindow = _this2$state.iClosedWindow;
        if (window && window.closed) {
          if (windowTimer) clearInterval(windowTimer);
          if (!iClosedWindow) {
            _this2.emit("close");
          }
          _this2.update({
            iClosedWindow: false,
            window: null
          });
        }
        if (window === null && windowTimer) clearInterval(windowTimer);
      }, 500);
      this.update({
        windowTimer: timer
      });
    }
  }]);
  return PopupHandler;
}(BaseController/* default */.Z);
/* harmony default export */ const Popup_PopupHandler = (PopupHandler);
;// CONCATENATED MODULE: ./src/Popup/PopupStoreChannel.ts







var PopupStoreChannel = /*#__PURE__*/function () {
  function PopupStoreChannel(_ref) {
    var instanceId = _ref.instanceId,
      handleLogout = _ref.handleLogout,
      handleAccountImport = _ref.handleAccountImport,
      handleNetworkChange = _ref.handleNetworkChange,
      handleSelectedAddressChange = _ref.handleSelectedAddressChange,
      handleThemeChange = _ref.handleThemeChange;
    classCallCheck_default()(this, PopupStoreChannel);
    defineProperty_default()(this, "handleLogout", void 0);
    defineProperty_default()(this, "handleAccountImport", void 0);
    defineProperty_default()(this, "handleNetworkChange", void 0);
    defineProperty_default()(this, "handleThemeChange", void 0);
    defineProperty_default()(this, "handleSelectedAddressChange", void 0);
    defineProperty_default()(this, "instanceId", void 0);
    this.instanceId = instanceId;
    this.handleLogout = handleLogout;
    this.handleAccountImport = handleAccountImport;
    this.handleNetworkChange = handleNetworkChange;
    this.handleSelectedAddressChange = handleSelectedAddressChange;
    this.handleThemeChange = handleThemeChange;
  }
  createClass_default()(PopupStoreChannel, [{
    key: "setupStoreChannels",
    value: function setupStoreChannels() {
      this.logoutChannel();
      this.importAccountChannel();
      this.networkChangeChannel();
      this.selectedAddressChangeChannel();
      this.themeChangedChannel();
    }
  }, {
    key: "logoutChannel",
    value: function logoutChannel() {
      var _this = this;
      var logoutChannel = new broadcast_channel_namespaceObject.BroadcastChannel("".concat(enums/* BROADCAST_CHANNELS.WALLET_LOGOUT_CHANNEL */.kl.WALLET_LOGOUT_CHANNEL, "_").concat(this.instanceId), utils/* broadcastChannelOptions */.aN);
      logoutChannel.addEventListener("message", function (ev) {
        var _ev$data;
        external_loglevel_default().info("received logout message", ev);
        if (!ev.error && ((_ev$data = ev.data) === null || _ev$data === void 0 ? void 0 : _ev$data.type) === enums/* BROADCAST_CHANNELS_MSGS.LOGOUT */.$x.LOGOUT) {
          external_loglevel_default().info("Logging Out");
          _this.handleLogout();
        }
      });
    }
  }, {
    key: "importAccountChannel",
    value: function importAccountChannel() {
      var _this2 = this;
      var walletAccountImportChannel = new broadcast_channel_namespaceObject.BroadcastChannel("".concat(enums/* BROADCAST_CHANNELS.WALLET_ACCOUNT_IMPORT_CHANNEL */.kl.WALLET_ACCOUNT_IMPORT_CHANNEL, "_").concat(this.instanceId), utils/* broadcastChannelOptions */.aN);
      walletAccountImportChannel.addEventListener("message", function (ev) {
        var _ev$data2;
        if (!ev.error && ((_ev$data2 = ev.data) === null || _ev$data2 === void 0 ? void 0 : _ev$data2.type) === enums/* BROADCAST_CHANNELS_MSGS.ACCOUNT_IMPORTED */.$x.ACCOUNT_IMPORTED) {
          var _ev$data3;
          _this2.handleAccountImport((_ev$data3 = ev.data) === null || _ev$data3 === void 0 ? void 0 : _ev$data3.privKey);
        }
      });
    }
  }, {
    key: "networkChangeChannel",
    value: function networkChangeChannel() {
      var _this3 = this;
      var walletAccountImportChannel = new broadcast_channel_namespaceObject.BroadcastChannel("".concat(enums/* BROADCAST_CHANNELS.WALLET_NETWORK_CHANGE_CHANNEL */.kl.WALLET_NETWORK_CHANGE_CHANNEL, "_").concat(this.instanceId), utils/* broadcastChannelOptions */.aN);
      walletAccountImportChannel.addEventListener("message", function (ev) {
        var _ev$data4;
        if (!ev.error && ((_ev$data4 = ev.data) === null || _ev$data4 === void 0 ? void 0 : _ev$data4.type) === enums/* BROADCAST_CHANNELS_MSGS.NETWORK_CHANGE */.$x.NETWORK_CHANGE) {
          var _ev$data5;
          _this3.handleNetworkChange((_ev$data5 = ev.data) === null || _ev$data5 === void 0 ? void 0 : _ev$data5.network);
        }
      });
    }
  }, {
    key: "themeChangedChannel",
    value: function themeChangedChannel() {
      var _this4 = this;
      var walletAccountImportChannel = new broadcast_channel_namespaceObject.BroadcastChannel("".concat(enums/* BROADCAST_CHANNELS.THEME_CHANGE */.kl.THEME_CHANGE, "_").concat(this.instanceId), utils/* broadcastChannelOptions */.aN);
      walletAccountImportChannel.addEventListener("message", function (ev) {
        var _ev$data6;
        external_loglevel_default().info({
          ev: ev
        });
        if (!ev.error && ((_ev$data6 = ev.data) === null || _ev$data6 === void 0 ? void 0 : _ev$data6.type) === enums/* BROADCAST_CHANNELS_MSGS.SET_THEME */.$x.SET_THEME) {
          var _ev$data7;
          _this4.handleThemeChange((_ev$data7 = ev.data) === null || _ev$data7 === void 0 ? void 0 : _ev$data7.theme);
        }
      });
    }
  }, {
    key: "selectedAddressChangeChannel",
    value: function selectedAddressChangeChannel() {
      var _this5 = this;
      var walletAccountImportChannel = new broadcast_channel_namespaceObject.BroadcastChannel("".concat(enums/* BROADCAST_CHANNELS.WALLET_SELECTED_ADDRESS_CHANNEL */.kl.WALLET_SELECTED_ADDRESS_CHANNEL, "_").concat(this.instanceId), utils/* broadcastChannelOptions */.aN);
      walletAccountImportChannel.addEventListener("message", function (ev) {
        var _ev$data8;
        if (!ev.error && ((_ev$data8 = ev.data) === null || _ev$data8 === void 0 ? void 0 : _ev$data8.type) === enums/* BROADCAST_CHANNELS_MSGS.SELECTED_ADDRESS_CHANGE */.$x.SELECTED_ADDRESS_CHANGE) {
          var _ev$data9;
          _this5.handleSelectedAddressChange((_ev$data9 = ev.data) === null || _ev$data9 === void 0 ? void 0 : _ev$data9.selectedAddress);
        }
      });
    }
  }]);
  return PopupStoreChannel;
}();

;// CONCATENATED MODULE: ./src/Popup/PopupWithBcHandler.ts









function PopupWithBcHandler_createSuper(Derived) { var hasNativeReflectConstruct = PopupWithBcHandler_isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }
function PopupWithBcHandler_isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }





/**
 * PopupWithBcHandler is a PopupHandler which uses broadcast channel to communicate with the popup window.
 */
var PopupWithBcHandler = /*#__PURE__*/function (_PopupHandler) {
  inherits_default()(PopupWithBcHandler, _PopupHandler);
  var _super = PopupWithBcHandler_createSuper(PopupWithBcHandler);
  function PopupWithBcHandler(_ref) {
    var _this;
    var config = _ref.config,
      state = _ref.state,
      instanceId = _ref.instanceId;
    classCallCheck_default()(this, PopupWithBcHandler);
    _this = _super.call(this, {
      config: config,
      state: state
    });
    defineProperty_default()(assertThisInitialized_default()(_this), "bc", void 0);
    _this.bc = new broadcast_channel_namespaceObject.BroadcastChannel(instanceId, utils/* broadcastChannelOptions */.aN);
    return _this;
  }

  /**
   * Receives the data from popup window and closes the window
   * @param successExtraFn - Extra function to be called after the data is received
   * @returns The data to be received
   */
  createClass_default()(PopupWithBcHandler, [{
    key: "handle",
    value: function handle(successExtraFn) {
      var _this2 = this;
      return new Promise(function (resolve, reject) {
        var closeListener = function closeListener() {
          _this2.bc.close();
          reject(new utils/* UserError */.gK("user closed popup"));
          _this2.removeListener("close", closeListener);
        };
        _this2.on("close", closeListener);
        _this2.bc.addEventListener("message", /*#__PURE__*/function () {
          var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(ev) {
            var error, data;
            return regenerator_default().wrap(function _callee$(_context) {
              while (1) {
                switch (_context.prev = _context.next) {
                  case 0:
                    external_loglevel_default().info(ev, "receiving data on channel: ".concat(_this2.bc.name));
                    _context.prev = 1;
                    error = ev.error, data = ev.data;
                    if (!error) {
                      _context.next = 6;
                      break;
                    }
                    reject(new Error(error));
                    return _context.abrupt("return");
                  case 6:
                    if (!successExtraFn) {
                      _context.next = 9;
                      break;
                    }
                    _context.next = 9;
                    return successExtraFn.call(_this2, data);
                  case 9:
                    resolve(data);
                    _context.next = 15;
                    break;
                  case 12:
                    _context.prev = 12;
                    _context.t0 = _context["catch"](1);
                    reject(_context.t0);
                  case 15:
                    _context.prev = 15;
                    _this2.bc.close();
                    _this2.close();
                    return _context.finish(15);
                  case 19:
                  case "end":
                    return _context.stop();
                }
              }
            }, _callee, null, [[1, 12, 15, 19]]);
          }));
          return function (_x) {
            return _ref2.apply(this, arguments);
          };
        }());
        _this2.open().then(function () {
          external_loglevel_default().info("opened window ".concat(_this2.bc.name));
          // Opened window. yay.  let the bc events do their job
          return undefined;
        }).catch(function (err) {
          external_loglevel_default().error(err, "something went wrong while opening window");
          reject(err);
        });
      });
    }

    /**
     * Use this if we have to send large payloads which don't fit in query/hash params.
     * Waits for ack that popup window is ready to receive data.
     * Receives the data from popup window and closes the window
     * @param payload - The data to be sent to the popup window once we have ack that window is ready to receive data
     * @param successExtraFn - Extra function to be called after the data is received
     * @returns The data to be received
     */
  }, {
    key: "handleWithHandshake",
    value: function handleWithHandshake(payload, successExtraFn) {
      var _this3 = this;
      return new Promise(function (resolve, reject) {
        var closeListener = function closeListener() {
          _this3.bc.close();
          reject(new utils/* UserError */.gK("user closed popup"));
          _this3.removeListener("close", closeListener);
        };
        _this3.on("close", closeListener);
        _this3.bc.addEventListener("message", /*#__PURE__*/function () {
          var _ref3 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(ev) {
            var error, data, _ref4, _ref4$type, type;
            return regenerator_default().wrap(function _callee2$(_context2) {
              while (1) {
                switch (_context2.prev = _context2.next) {
                  case 0:
                    _context2.prev = 0;
                    external_loglevel_default().info(ev, "receiving data on channel: ".concat(_this3.bc.name));
                    error = ev.error, data = ev.data;
                    if (!error) {
                      _context2.next = 6;
                      break;
                    }
                    reject(new Error(error));
                    return _context2.abrupt("return");
                  case 6:
                    // Do handshake
                    _ref4 = data, _ref4$type = _ref4.type, type = _ref4$type === void 0 ? "" : _ref4$type;
                    if (!(type === enums/* POPUP_LOADED */.AA)) {
                      _context2.next = 12;
                      break;
                    }
                    _context2.next = 10;
                    return _this3.bc.postMessage({
                      data: payload
                    });
                  case 10:
                    _context2.next = 19;
                    break;
                  case 12:
                    if (!(type === enums/* POPUP_RESULT */.EV)) {
                      _context2.next = 19;
                      break;
                    }
                    if (!successExtraFn) {
                      _context2.next = 16;
                      break;
                    }
                    _context2.next = 16;
                    return successExtraFn.call(_this3, data);
                  case 16:
                    resolve(data);
                    // Must only close the bc after result is done
                    _this3.bc.close();
                    _this3.close();
                  case 19:
                    _context2.next = 26;
                    break;
                  case 21:
                    _context2.prev = 21;
                    _context2.t0 = _context2["catch"](0);
                    reject(_context2.t0);
                    _this3.bc.close();
                    _this3.close();
                  case 26:
                  case "end":
                    return _context2.stop();
                }
              }
            }, _callee2, null, [[0, 21]]);
          }));
          return function (_x2) {
            return _ref3.apply(this, arguments);
          };
        }());
        _this3.open().then(function () {
          external_loglevel_default().info("opened window ".concat(_this3.bc.name));
          // Opened window. yay.  let the bc events do their job
          return undefined;
        }).catch(function (err) {
          external_loglevel_default().error(err, "something went wrong while opening window");
          reject(err);
        });
      });
    }
  }]);
  return PopupWithBcHandler;
}(Popup_PopupHandler);
/* harmony default export */ const Popup_PopupWithBcHandler = (PopupWithBcHandler);
// EXTERNAL MODULE: ./src/utils/utils.ts + 3 modules
var utils_utils = __webpack_require__(235);
;// CONCATENATED MODULE: ./src/Popup/RedirectHandler.ts









var RedirectHandler = /*#__PURE__*/function () {
  function RedirectHandler() {
    var _this = this;
    classCallCheck_default()(this, RedirectHandler);
    defineProperty_default()(this, "error", void 0);
    defineProperty_default()(this, "finalQueryParams", {});
    defineProperty_default()(this, "instanceParameters", void 0);
    defineProperty_default()(this, "hashParameters", void 0);
    var hash = window.location.hash;
    var queryParameters = new URLSearchParams(window.location.search);
    queryParameters.forEach(function (value, key) {
      _this.finalQueryParams[key] = value;
    });
    var _handleRedirectParame = (0,utils_utils/* handleRedirectParameters */.Kv)(hash, this.finalQueryParams),
      error = _handleRedirectParame.error,
      instanceParameters = _handleRedirectParame.instanceParameters,
      hashParameters = _handleRedirectParame.hashParameters;
    this.error = error;
    this.instanceParameters = instanceParameters;
    this.hashParameters = hashParameters;
  }
  createClass_default()(RedirectHandler, [{
    key: "handle",
    value: function () {
      var _handle = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee3() {
        var _this2 = this;
        return regenerator_default().wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                return _context3.abrupt("return", new Promise(function (resolve, reject) {
                  var finalQueryParams = _this2.finalQueryParams,
                    instanceParameters = _this2.instanceParameters,
                    hashParameters = _this2.hashParameters,
                    error = _this2.error;
                  var bc;
                  try {
                    if (!finalQueryParams.windowId) {
                      bc = new broadcast_channel_namespaceObject.BroadcastChannel("".concat(enums/* BROADCAST_CHANNELS.REDIRECT_CHANNEL */.kl.REDIRECT_CHANNEL, "_").concat(instanceParameters.instanceId), utils_utils/* broadcastChannelOptions */.aN);
                      bc.addEventListener("message", /*#__PURE__*/function () {
                        var _ref = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(ev) {
                          return regenerator_default().wrap(function _callee$(_context) {
                            while (1) {
                              switch (_context.prev = _context.next) {
                                case 0:
                                  if (ev.error) {
                                    reject(ev.error);
                                    window.close();
                                  } else {
                                    resolve();
                                    bc.close();
                                    external_loglevel_default().info("posted", {
                                      finalQueryParams: finalQueryParams,
                                      hashParameters: hashParameters,
                                      instanceParameters: instanceParameters
                                    });
                                  }
                                case 1:
                                case "end":
                                  return _context.stop();
                              }
                            }
                          }, _callee);
                        }));
                        return function (_x) {
                          return _ref.apply(this, arguments);
                        };
                      }());
                      bc.postMessage({
                        data: {
                          instanceParams: instanceParameters,
                          hashParams: hashParameters,
                          queryParams: finalQueryParams
                        },
                        error: error
                      });
                      setTimeout(function () {
                        resolve();
                        window.location.href = window.location.origin + window.location.search + window.location.hash;
                      }, 5000);
                    } else {
                      bc = new broadcast_channel_namespaceObject.BroadcastChannel("".concat(finalQueryParams.windowId), utils_utils/* broadcastChannelOptions */.aN);
                      bc.addEventListener("message", /*#__PURE__*/function () {
                        var _ref2 = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(ev) {
                          var _ref3, url, message;
                          return regenerator_default().wrap(function _callee2$(_context2) {
                            while (1) {
                              switch (_context2.prev = _context2.next) {
                                case 0:
                                  _ref3 = ev.data, url = _ref3.url, message = _ref3.message;
                                  if (!url) {
                                    _context2.next = 6;
                                    break;
                                  }
                                  resolve();
                                  window.location.href = url;
                                  _context2.next = 9;
                                  break;
                                case 6:
                                  if (!(message === enums/* SETUP_COMPLETE */.bJ)) {
                                    _context2.next = 9;
                                    break;
                                  }
                                  _context2.next = 9;
                                  return bc.postMessage({
                                    data: {
                                      windowId: finalQueryParams.windowId,
                                      message: enums/* POPUP_LOADED */.AA
                                    }
                                  });
                                case 9:
                                  if (ev.error && ev.error !== "") {
                                    external_loglevel_default().error(ev.error);
                                    resolve();
                                    bc.close();
                                  }
                                case 10:
                                case "end":
                                  return _context2.stop();
                              }
                            }
                          }, _callee2);
                        }));
                        return function (_x2) {
                          return _ref2.apply(this, arguments);
                        };
                      }());
                    }
                  } catch (err) {
                    external_loglevel_default().info(err, "something went wrong");
                    reject(err);
                    if (bc) bc.close();
                    window.close();
                  }
                }));
              case 1:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3);
      }));
      function handle() {
        return _handle.apply(this, arguments);
      }
      return handle;
    }()
  }]);
  return RedirectHandler;
}();

;// CONCATENATED MODULE: ./src/Popup/index.ts








/***/ }),

/***/ 81:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "f": () => (/* binding */ BasePreferencesController),
  "a": () => (/* binding */ DEFAULT_PREFERENCES)
});

;// CONCATENATED MODULE: external "@babel/runtime/helpers/toConsumableArray"
const toConsumableArray_namespaceObject = require("@babel/runtime/helpers/toConsumableArray");
var toConsumableArray_default = /*#__PURE__*/__webpack_require__.n(toConsumableArray_namespaceObject);
// EXTERNAL MODULE: external "@babel/runtime/helpers/asyncToGenerator"
var asyncToGenerator_ = __webpack_require__(798);
var asyncToGenerator_default = /*#__PURE__*/__webpack_require__.n(asyncToGenerator_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/classCallCheck"
var classCallCheck_ = __webpack_require__(628);
var classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/createClass"
var createClass_ = __webpack_require__(201);
var createClass_default = /*#__PURE__*/__webpack_require__.n(createClass_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/assertThisInitialized"
var assertThisInitialized_ = __webpack_require__(685);
var assertThisInitialized_default = /*#__PURE__*/__webpack_require__.n(assertThisInitialized_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/inherits"
var inherits_ = __webpack_require__(627);
var inherits_default = /*#__PURE__*/__webpack_require__.n(inherits_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/possibleConstructorReturn"
var possibleConstructorReturn_ = __webpack_require__(840);
var possibleConstructorReturn_default = /*#__PURE__*/__webpack_require__.n(possibleConstructorReturn_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/getPrototypeOf"
var getPrototypeOf_ = __webpack_require__(528);
var getPrototypeOf_default = /*#__PURE__*/__webpack_require__.n(getPrototypeOf_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/defineProperty"
var defineProperty_ = __webpack_require__(195);
var defineProperty_default = /*#__PURE__*/__webpack_require__.n(defineProperty_);
// EXTERNAL MODULE: external "@babel/runtime/regenerator"
var regenerator_ = __webpack_require__(650);
var regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator_);
;// CONCATENATED MODULE: external "@toruslabs/http-helpers"
const http_helpers_namespaceObject = require("@toruslabs/http-helpers");
;// CONCATENATED MODULE: external "bowser"
const external_bowser_namespaceObject = require("bowser");
var external_bowser_default = /*#__PURE__*/__webpack_require__.n(external_bowser_namespaceObject);
// EXTERNAL MODULE: external "lodash"
var external_lodash_ = __webpack_require__(793);
// EXTERNAL MODULE: external "loglevel"
var external_loglevel_ = __webpack_require__(485);
var external_loglevel_default = /*#__PURE__*/__webpack_require__.n(external_loglevel_);
// EXTERNAL MODULE: ./src/BaseController.ts
var BaseController = __webpack_require__(758);
// EXTERNAL MODULE: ./src/interfaces.ts
var interfaces = __webpack_require__(850);
// EXTERNAL MODULE: ./src/utils/index.ts + 1 modules
var utils = __webpack_require__(883);
// EXTERNAL MODULE: ./src/Preferences/IPreferencesController.ts
var IPreferencesController = __webpack_require__(646);
;// CONCATENATED MODULE: ./src/Preferences/BasePreferencesController.ts










function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { defineProperty_default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }









// By default, poll every 3 minutes
var DEFAULT_INTERVAL = 180 * 1000;
var DEFAULT_PREFERENCES = {
  selectedCurrency: "USD",
  theme: "dark",
  locale: "en-US",
  accountType: IPreferencesController/* ACCOUNT_CATEGORY.NORMAL */.O.NORMAL,
  contacts: [],
  jwtToken: "",
  fetchedPastTx: [],
  pastTransactions: [],
  paymentTx: [],
  defaultPublicAddress: "",
  customTokens: [],
  customNfts: [],
  crashReport: true,
  userInfo: {
    aggregateVerifier: "",
    email: "",
    name: "",
    profileImage: "",
    typeOfLogin: interfaces/* LOGIN_PROVIDER.GOOGLE */.h.GOOGLE,
    verifier: "",
    verifierId: ""
  }
};

/**
 * Controller that stores shared settings and exposes convenience methods
 */
var BasePreferencesController = /*#__PURE__*/function (_BaseController) {
  inherits_default()(BasePreferencesController, _BaseController);
  var _super = _createSuper(BasePreferencesController);
  /**
   * Name of this controller used during composition
   */

  /**
   * Creates a PreferencesController instance
   *
   * @param config - Initial options used to configure this controller
   * @param state - Initial state to set on this controller
   */
  function BasePreferencesController(_ref) {
    var _this;
    var config = _ref.config,
      state = _ref.state,
      defaultPreferences = _ref.defaultPreferences,
      signAuthMessage = _ref.signAuthMessage;
    classCallCheck_default()(this, BasePreferencesController);
    _this = _super.call(this, {
      config: config,
      state: state
    });
    defineProperty_default()(assertThisInitialized_default()(_this), "name", "PreferencesController");
    defineProperty_default()(assertThisInitialized_default()(_this), "iframeOrigin", void 0);
    defineProperty_default()(assertThisInitialized_default()(_this), "signAuthMessage", void 0);
    defineProperty_default()(assertThisInitialized_default()(_this), "defaultPreferences", void 0);
    if (!config.api) {
      throw new Error("PreferencesController - no api specified in config.");
    }
    _this.defaultState = {
      identities: {},
      selectedAddress: "",
      lastErrorMessage: "",
      lastSuccessMessage: ""
    };
    _this.defaultConfig = {
      api: config.api,
      pollInterval: DEFAULT_INTERVAL
    };
    _this.initialize();
    _this.defaultPreferences = _objectSpread(_objectSpread({}, DEFAULT_PREFERENCES), defaultPreferences);
    _this.signAuthMessage = signAuthMessage;
    return _this;
  }
  createClass_default()(BasePreferencesController, [{
    key: "setIframeOrigin",
    value: function setIframeOrigin(origin) {
      this.iframeOrigin = origin;
    }
  }, {
    key: "getAddressState",
    value: function getAddressState(address) {
      var selectedAddress = address || this.state.selectedAddress;
      return this.state.identities[selectedAddress];
    }

    /**
     * Sets selected address
     *
     * @param selectedAddress - casper account hash
     */
  }, {
    key: "setSelectedAddress",
    value: function setSelectedAddress(selectedAddress) {
      this.update({
        selectedAddress: selectedAddress
      });
    }
  }, {
    key: "getUser",
    value: function () {
      var _getUser = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee(address) {
        var user;
        return regenerator_default().wrap(function _callee$(_context) {
          while (1) {
            switch (_context.prev = _context.next) {
              case 0:
                _context.next = 2;
                return (0,http_helpers_namespaceObject.get)("".concat(this.config.api, "/user?fetchTx=false"), this.headers(address), {
                  useAPIKey: true
                });
              case 2:
                user = _context.sent;
                return _context.abrupt("return", user.data);
              case 4:
              case "end":
                return _context.stop();
            }
          }
        }, _callee, this);
      }));
      function getUser(_x) {
        return _getUser.apply(this, arguments);
      }
      return getUser;
    }()
  }, {
    key: "createUser",
    value: function () {
      var _createUser = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee2(params) {
        var selectedCurrency, theme, verifier, verifierId, locale, address, idToken, userPayload;
        return regenerator_default().wrap(function _callee2$(_context2) {
          while (1) {
            switch (_context2.prev = _context2.next) {
              case 0:
                selectedCurrency = params.selectedCurrency, theme = params.theme, verifier = params.verifier, verifierId = params.verifierId, locale = params.locale, address = params.address, idToken = params.idToken;
                userPayload = {
                  default_currency: selectedCurrency,
                  theme: theme,
                  verifier: verifier,
                  verifier_id: verifierId,
                  locale: locale,
                  idToken: idToken
                };
                _context2.next = 4;
                return (0,http_helpers_namespaceObject.post)("".concat(this.config.api, "/user"), userPayload, this.headers(address), {
                  useAPIKey: true
                });
              case 4:
                this.updateState({
                  theme: theme,
                  defaultPublicAddress: address,
                  selectedCurrency: selectedCurrency,
                  locale: locale
                }, address);
              case 5:
              case "end":
                return _context2.stop();
            }
          }
        }, _callee2, this);
      }));
      function createUser(_x2) {
        return _createUser.apply(this, arguments);
      }
      return createUser;
    }()
  }, {
    key: "storeUserLogin",
    value: function () {
      var _storeUserLogin = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee3(params) {
        var verifierId, verifier, options, address, idToken, browser, specialBrowser, recordLoginPayload;
        return regenerator_default().wrap(function _callee3$(_context3) {
          while (1) {
            switch (_context3.prev = _context3.next) {
              case 0:
                verifierId = params.verifierId, verifier = params.verifier, options = params.options, address = params.address, idToken = params.idToken;
                if (options.rehydrate) {
                  _context3.next = 7;
                  break;
                }
                browser = external_bowser_default().getParser(window.navigator.userAgent);
                specialBrowser = (0,utils/* getCustomDeviceInfo */.Z2)();
                recordLoginPayload = {
                  os: browser.getOSName(),
                  os_version: browser.getOSVersion() || "unidentified",
                  browser: (specialBrowser === null || specialBrowser === void 0 ? void 0 : specialBrowser.browser) || browser.getBrowserName() || "unidentified",
                  browser_version: browser.getBrowserVersion() || "unidentified",
                  platform: browser.getPlatform().type || "desktop",
                  hostname: this.iframeOrigin,
                  verifier: verifier,
                  verifier_id: verifierId,
                  idToken: idToken
                };
                _context3.next = 7;
                return (0,http_helpers_namespaceObject.post)("".concat(this.config.api, "/user/recordLogin"), recordLoginPayload, this.headers(address), {
                  useAPIKey: true
                });
              case 7:
              case "end":
                return _context3.stop();
            }
          }
        }, _callee3, this);
      }));
      function storeUserLogin(_x3) {
        return _storeUserLogin.apply(this, arguments);
      }
      return storeUserLogin;
    }()
  }, {
    key: "setCrashReport",
    value: function () {
      var _setCrashReport = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee4(isEnabled) {
        var _this$getAddressState;
        return regenerator_default().wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                if (!(isEnabled === ((_this$getAddressState = this.getAddressState()) === null || _this$getAddressState === void 0 ? void 0 : _this$getAddressState.crashReport))) {
                  _context4.next = 2;
                  break;
                }
                return _context4.abrupt("return", true);
              case 2:
                _context4.prev = 2;
                _context4.next = 5;
                return (0,http_helpers_namespaceObject.patch)("".concat(this.config.api, "/user"), {
                  enable_crash_reporter: isEnabled
                }, this.headers(), {
                  useAPIKey: true
                });
              case 5:
                this.updateState({
                  crashReport: isEnabled
                });
                return _context4.abrupt("return", true);
              case 9:
                _context4.prev = 9;
                _context4.t0 = _context4["catch"](2);
                external_loglevel_default().error(_context4.t0);
                return _context4.abrupt("return", false);
              case 13:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4, this, [[2, 9]]);
      }));
      function setCrashReport(_x4) {
        return _setCrashReport.apply(this, arguments);
      }
      return setCrashReport;
    }()
  }, {
    key: "setUserTheme",
    value: function () {
      var _setUserTheme = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee5(theme) {
        var _this$getAddressState2;
        return regenerator_default().wrap(function _callee5$(_context5) {
          while (1) {
            switch (_context5.prev = _context5.next) {
              case 0:
                if (!(theme === ((_this$getAddressState2 = this.getAddressState()) === null || _this$getAddressState2 === void 0 ? void 0 : _this$getAddressState2.theme))) {
                  _context5.next = 2;
                  break;
                }
                return _context5.abrupt("return", true);
              case 2:
                _context5.prev = 2;
                _context5.next = 5;
                return (0,http_helpers_namespaceObject.patch)("".concat(this.config.api, "/user"), {
                  theme: theme
                }, this.headers(), {
                  useAPIKey: true
                });
              case 5:
                this.updateState({
                  theme: theme
                });
                return _context5.abrupt("return", true);
              case 9:
                _context5.prev = 9;
                _context5.t0 = _context5["catch"](2);
                external_loglevel_default().error(_context5.t0);
                return _context5.abrupt("return", false);
              case 13:
              case "end":
                return _context5.stop();
            }
          }
        }, _callee5, this, [[2, 9]]);
      }));
      function setUserTheme(_x5) {
        return _setUserTheme.apply(this, arguments);
      }
      return setUserTheme;
    }()
  }, {
    key: "setUserLocale",
    value: function () {
      var _setUserLocale = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee6(locale) {
        var _this$getAddressState3;
        return regenerator_default().wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                if (!(locale === ((_this$getAddressState3 = this.getAddressState()) === null || _this$getAddressState3 === void 0 ? void 0 : _this$getAddressState3.locale))) {
                  _context6.next = 2;
                  break;
                }
                return _context6.abrupt("return");
              case 2:
                _context6.prev = 2;
                _context6.next = 5;
                return (0,http_helpers_namespaceObject.patch)("".concat(this.config.api, "/user"), {
                  locale: locale
                }, this.headers(), {
                  useAPIKey: true
                });
              case 5:
                this.updateState({
                  locale: locale
                });
                return _context6.abrupt("return", true);
              case 9:
                _context6.prev = 9;
                _context6.t0 = _context6["catch"](2);
                external_loglevel_default().error("unable to set locale", _context6.t0);
                return _context6.abrupt("return", false);
              case 13:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6, this, [[2, 9]]);
      }));
      function setUserLocale(_x6) {
        return _setUserLocale.apply(this, arguments);
      }
      return setUserLocale;
    }()
  }, {
    key: "setSelectedCurrency",
    value: function () {
      var _setSelectedCurrency = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee7(payload) {
        var _this$getAddressState4;
        return regenerator_default().wrap(function _callee7$(_context7) {
          while (1) {
            switch (_context7.prev = _context7.next) {
              case 0:
                if (!(payload.selectedCurrency === ((_this$getAddressState4 = this.getAddressState()) === null || _this$getAddressState4 === void 0 ? void 0 : _this$getAddressState4.selectedCurrency))) {
                  _context7.next = 2;
                  break;
                }
                return _context7.abrupt("return", true);
              case 2:
                _context7.prev = 2;
                _context7.next = 5;
                return (0,http_helpers_namespaceObject.patch)("".concat(this.config.api, "/user"), {
                  default_currency: payload.selectedCurrency
                }, this.headers(), {
                  useAPIKey: true
                });
              case 5:
                this.updateState({
                  selectedCurrency: payload.selectedCurrency
                });
                return _context7.abrupt("return", true);
              case 9:
                _context7.prev = 9;
                _context7.t0 = _context7["catch"](2);
                external_loglevel_default().error(_context7.t0);
                return _context7.abrupt("return", false);
              case 13:
              case "end":
                return _context7.stop();
            }
          }
        }, _callee7, this, [[2, 9]]);
      }));
      function setSelectedCurrency(_x7) {
        return _setSelectedCurrency.apply(this, arguments);
      }
      return setSelectedCurrency;
    }()
  }, {
    key: "addContact",
    value: function () {
      var _addContact = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee8(contact) {
        var _this$getAddressState5, response;
        return regenerator_default().wrap(function _callee8$(_context8) {
          while (1) {
            switch (_context8.prev = _context8.next) {
              case 0:
                _context8.prev = 0;
                _context8.next = 3;
                return (0,http_helpers_namespaceObject.post)("".concat(this.config.api, "/contact"), contact, this.headers(), {
                  useAPIKey: true
                });
              case 3:
                response = _context8.sent;
                this.updateState({
                  contacts: [].concat(toConsumableArray_default()(((_this$getAddressState5 = this.getAddressState()) === null || _this$getAddressState5 === void 0 ? void 0 : _this$getAddressState5.contacts) || []), [response.data])
                });
                return _context8.abrupt("return", true);
              case 8:
                _context8.prev = 8;
                _context8.t0 = _context8["catch"](0);
                external_loglevel_default().error("unable to add contact", _context8.t0);
                return _context8.abrupt("return", false);
              case 12:
              case "end":
                return _context8.stop();
            }
          }
        }, _callee8, this, [[0, 8]]);
      }));
      function addContact(_x8) {
        return _addContact.apply(this, arguments);
      }
      return addContact;
    }()
  }, {
    key: "deleteContact",
    value: function () {
      var _deleteContact = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee9(contactId) {
        var _this$getAddressState6, response, finalContacts;
        return regenerator_default().wrap(function _callee9$(_context9) {
          while (1) {
            switch (_context9.prev = _context9.next) {
              case 0:
                _context9.prev = 0;
                _context9.next = 3;
                return (0,http_helpers_namespaceObject.remove)("".concat(this.config.api, "/contact/").concat(contactId), {}, this.headers(), {
                  useAPIKey: true
                });
              case 3:
                response = _context9.sent;
                finalContacts = (_this$getAddressState6 = this.getAddressState()) === null || _this$getAddressState6 === void 0 ? void 0 : _this$getAddressState6.contacts.filter(function (contact) {
                  return contact.id !== response.data.id;
                });
                if (finalContacts) this.updateState({
                  contacts: toConsumableArray_default()(finalContacts)
                });
                return _context9.abrupt("return", true);
              case 9:
                _context9.prev = 9;
                _context9.t0 = _context9["catch"](0);
                external_loglevel_default().error("unable to delete contact", _context9.t0);
                return _context9.abrupt("return", false);
              case 13:
              case "end":
                return _context9.stop();
            }
          }
        }, _callee9, this, [[0, 9]]);
      }));
      function deleteContact(_x9) {
        return _deleteContact.apply(this, arguments);
      }
      return deleteContact;
    }()
  }, {
    key: "revokeDiscord",
    value: function () {
      var _revokeDiscord = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee10(idToken) {
        var resp;
        return regenerator_default().wrap(function _callee10$(_context10) {
          while (1) {
            switch (_context10.prev = _context10.next) {
              case 0:
                _context10.prev = 0;
                _context10.next = 3;
                return (0,http_helpers_namespaceObject.post)("".concat(this.config.api, "/revoke/discord"), {
                  token: idToken
                }, this.headers(), {
                  useAPIKey: true
                });
              case 3:
                resp = _context10.sent;
                external_loglevel_default().info(resp);
                _context10.next = 10;
                break;
              case 7:
                _context10.prev = 7;
                _context10.t0 = _context10["catch"](0);
                external_loglevel_default().error(_context10.t0);
              case 10:
              case "end":
                return _context10.stop();
            }
          }
        }, _callee10, this, [[0, 7]]);
      }));
      function revokeDiscord(_x10) {
        return _revokeDiscord.apply(this, arguments);
      }
      return revokeDiscord;
    }()
  }, {
    key: "patchPastTx",
    value: function () {
      var _patchPastTx = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee11(body, address) {
        var response;
        return regenerator_default().wrap(function _callee11$(_context11) {
          while (1) {
            switch (_context11.prev = _context11.next) {
              case 0:
                _context11.prev = 0;
                _context11.next = 3;
                return (0,http_helpers_namespaceObject.patch)("".concat(this.config.api, "/transaction"), body, this.headers(address), {
                  useAPIKey: true
                });
              case 3:
                response = _context11.sent;
                external_loglevel_default().info("successfully patched", response);
                _context11.next = 10;
                break;
              case 7:
                _context11.prev = 7;
                _context11.t0 = _context11["catch"](0);
                external_loglevel_default().error("unable to patch tx", _context11.t0);
              case 10:
              case "end":
                return _context11.stop();
            }
          }
        }, _callee11, this, [[0, 7]]);
      }));
      function patchPastTx(_x11, _x12) {
        return _patchPastTx.apply(this, arguments);
      }
      return patchPastTx;
    }()
  }, {
    key: "postPastTx",
    value: function () {
      var _postPastTx = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee12(tx, address) {
        var response;
        return regenerator_default().wrap(function _callee12$(_context12) {
          while (1) {
            switch (_context12.prev = _context12.next) {
              case 0:
                _context12.prev = 0;
                _context12.next = 3;
                return (0,http_helpers_namespaceObject.post)("".concat(this.config.api, "/transaction"), tx, this.headers(address), {
                  useAPIKey: true
                });
              case 3:
                response = _context12.sent;
                external_loglevel_default().info("successfully posted tx", response);
                return _context12.abrupt("return", response);
              case 8:
                _context12.prev = 8;
                _context12.t0 = _context12["catch"](0);
                external_loglevel_default().error(_context12.t0, "unable to insert transaction");
              case 11:
              case "end":
                return _context12.stop();
            }
          }
        }, _callee12, this, [[0, 8]]);
      }));
      function postPastTx(_x13, _x14) {
        return _postPastTx.apply(this, arguments);
      }
      return postPastTx;
    }()
  }, {
    key: "getWalletOrders",
    value: function () {
      var _getWalletOrders = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee13(address) {
        var response;
        return regenerator_default().wrap(function _callee13$(_context13) {
          while (1) {
            switch (_context13.prev = _context13.next) {
              case 0:
                _context13.prev = 0;
                _context13.next = 3;
                return (0,http_helpers_namespaceObject.get)("".concat(this.config.api, "/transaction"), this.headers(address), {
                  useAPIKey: true
                });
              case 3:
                response = _context13.sent;
                return _context13.abrupt("return", response.success ? response.data ? response.data : [] : []);
              case 7:
                _context13.prev = 7;
                _context13.t0 = _context13["catch"](0);
                external_loglevel_default().error("unable to get wallet orders tx", _context13.t0);
                return _context13.abrupt("return", []);
              case 11:
              case "end":
                return _context13.stop();
            }
          }
        }, _callee13, this, [[0, 7]]);
      }));
      function getWalletOrders(_x15) {
        return _getWalletOrders.apply(this, arguments);
      }
      return getWalletOrders;
    }()
  }, {
    key: "getTopUpOrders",
    value: function () {
      var _getTopUpOrders = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee14(address) {
        var response;
        return regenerator_default().wrap(function _callee14$(_context14) {
          while (1) {
            switch (_context14.prev = _context14.next) {
              case 0:
                _context14.prev = 0;
                _context14.next = 3;
                return (0,http_helpers_namespaceObject.get)("".concat(this.config.commonApiHost, "/transaction"), this.headers(address), {
                  useAPIKey: true
                });
              case 3:
                response = _context14.sent;
                return _context14.abrupt("return", response.data || []);
              case 7:
                _context14.prev = 7;
                _context14.t0 = _context14["catch"](0);
                external_loglevel_default().error("unable to fetch past Top up orders", _context14.t0);
              case 10:
              case "end":
                return _context14.stop();
            }
          }
        }, _callee14, this, [[0, 7]]);
      }));
      function getTopUpOrders(_x16) {
        return _getTopUpOrders.apply(this, arguments);
      }
      return getTopUpOrders;
    }()
  }, {
    key: "getBillBoardData",
    value: function () {
      var _getBillBoardData = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee15() {
        var response;
        return regenerator_default().wrap(function _callee15$(_context15) {
          while (1) {
            switch (_context15.prev = _context15.next) {
              case 0:
                _context15.prev = 0;
                _context15.next = 3;
                return (0,http_helpers_namespaceObject.get)("".concat(this.config.api, "/billboard"), this.headers(), {
                  useAPIKey: true
                });
              case 3:
                response = _context15.sent;
                return _context15.abrupt("return", response.success ? response.data : []);
              case 7:
                _context15.prev = 7;
                _context15.t0 = _context15["catch"](0);
                external_loglevel_default().error("unable to get billboard data", _context15.t0);
                return _context15.abrupt("return", []);
              case 11:
              case "end":
                return _context15.stop();
            }
          }
        }, _callee15, this, [[0, 7]]);
      }));
      function getBillBoardData() {
        return _getBillBoardData.apply(this, arguments);
      }
      return getBillBoardData;
    }()
  }, {
    key: "getMessageForSigning",
    value: function () {
      var _getMessageForSigning = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee16(publicAddress) {
        var response;
        return regenerator_default().wrap(function _callee16$(_context16) {
          while (1) {
            switch (_context16.prev = _context16.next) {
              case 0:
                _context16.next = 2;
                return (0,http_helpers_namespaceObject.post)("".concat(this.config.api, "/auth/message"), {
                  public_address: publicAddress
                }, {}, {
                  useAPIKey: true
                });
              case 2:
                response = _context16.sent;
                return _context16.abrupt("return", response.message);
              case 4:
              case "end":
                return _context16.stop();
            }
          }
        }, _callee16, this);
      }));
      function getMessageForSigning(_x17) {
        return _getMessageForSigning.apply(this, arguments);
      }
      return getMessageForSigning;
    }()
  }, {
    key: "getTwitterId",
    value: function () {
      var _getTwitterId = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee17(payload) {
        var res;
        return regenerator_default().wrap(function _callee17$(_context17) {
          while (1) {
            switch (_context17.prev = _context17.next) {
              case 0:
                _context17.next = 2;
                return (0,http_helpers_namespaceObject.get)("".concat(this.config.api, "/twitter?screen_name=").concat(payload.nick), this.headers(), {
                  useAPIKey: true
                });
              case 2:
                res = _context17.sent;
                return _context17.abrupt("return", "".concat(payload.typeOfLogin.toLowerCase(), "|").concat(res.data.toString()));
              case 4:
              case "end":
                return _context17.stop();
            }
          }
        }, _callee17, this);
      }));
      function getTwitterId(_x18) {
        return _getTwitterId.apply(this, arguments);
      }
      return getTwitterId;
    }()
  }, {
    key: "sendEmail",
    value: function () {
      var _sendEmail = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee18(payload) {
        return regenerator_default().wrap(function _callee18$(_context18) {
          while (1) {
            switch (_context18.prev = _context18.next) {
              case 0:
                return _context18.abrupt("return", (0,http_helpers_namespaceObject.post)("".concat(this.config.api, "/transaction/sendemail"), payload.emailObject, this.headers(), {
                  useAPIKey: true
                }));
              case 1:
              case "end":
                return _context18.stop();
            }
          }
        }, _callee18, this);
      }));
      function sendEmail(_x19) {
        return _sendEmail.apply(this, arguments);
      }
      return sendEmail;
    }()
  }, {
    key: "refreshJwt",
    value: function () {
      var _refreshJwt = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee19() {
        var address, messageToSign, signedMessage, response;
        return regenerator_default().wrap(function _callee19$(_context19) {
          while (1) {
            switch (_context19.prev = _context19.next) {
              case 0:
                address = this.state.selectedAddress;
                _context19.next = 3;
                return this.getMessageForSigning(address);
              case 3:
                messageToSign = _context19.sent;
                if (messageToSign.startsWith(this.config.signInPrefix)) {
                  _context19.next = 6;
                  break;
                }
                throw new Error("Cannot sign on invalid message");
              case 6:
                signedMessage = this.signAuthMessage(address, messageToSign);
                _context19.next = 9;
                return (0,http_helpers_namespaceObject.post)("".concat(this.config.api, "/auth/verify"), {
                  public_address: address,
                  signed_message: signedMessage
                }, {}, {
                  useAPIKey: true
                });
              case 9:
                response = _context19.sent;
                this.updateState({
                  jwtToken: response.token
                }, address);
              case 11:
              case "end":
                return _context19.stop();
            }
          }
        }, _callee19, this);
      }));
      function refreshJwt() {
        return _refreshJwt.apply(this, arguments);
      }
      return refreshJwt;
    }()
  }, {
    key: "getDappList",
    value: function () {
      var _getDappList = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee20() {
        var response;
        return regenerator_default().wrap(function _callee20$(_context20) {
          while (1) {
            switch (_context20.prev = _context20.next) {
              case 0:
                _context20.prev = 0;
                _context20.next = 3;
                return (0,http_helpers_namespaceObject.get)("".concat(this.config.api, "/dapps"), this.headers(), {
                  useAPIKey: true
                });
              case 3:
                response = _context20.sent;
                return _context20.abrupt("return", response.success ? response.data : []);
              case 7:
                _context20.prev = 7;
                _context20.t0 = _context20["catch"](0);
                external_loglevel_default().error("unable to get billboard data", _context20.t0);
                return _context20.abrupt("return", []);
              case 11:
              case "end":
                return _context20.stop();
            }
          }
        }, _callee20, this, [[0, 7]]);
      }));
      function getDappList() {
        return _getDappList.apply(this, arguments);
      }
      return getDappList;
    }()
  }, {
    key: "init",
    value: function () {
      var _init = asyncToGenerator_default()( /*#__PURE__*/regenerator_default().mark(function _callee21(address, userInfo, jwtToken) {
        var response, messageToSign, signedMessage;
        return regenerator_default().wrap(function _callee21$(_context21) {
          while (1) {
            switch (_context21.prev = _context21.next) {
              case 0:
                response = {
                  token: jwtToken
                };
                if (!this.getAddressState(address)) {
                  _context21.next = 3;
                  break;
                }
                return _context21.abrupt("return");
              case 3:
                if (jwtToken) {
                  _context21.next = 13;
                  break;
                }
                _context21.next = 6;
                return this.getMessageForSigning(address);
              case 6:
                messageToSign = _context21.sent;
                if (messageToSign.startsWith(this.config.signInPrefix)) {
                  _context21.next = 9;
                  break;
                }
                throw new Error("Cannot sign on invalid message");
              case 9:
                signedMessage = this.signAuthMessage(address, messageToSign);
                _context21.next = 12;
                return (0,http_helpers_namespaceObject.post)("".concat(this.config.api, "/auth/verify"), {
                  public_address: address,
                  signed_message: signedMessage
                }, {}, {
                  useAPIKey: true
                });
              case 12:
                response = _context21.sent;
              case 13:
                this.updateState({
                  jwtToken: response.token,
                  userInfo: userInfo
                }, address);
              case 14:
              case "end":
                return _context21.stop();
            }
          }
        }, _callee21, this);
      }));
      function init(_x20, _x21, _x22) {
        return _init.apply(this, arguments);
      }
      return init;
    }()
  }, {
    key: "updateState",
    value: function updateState(preferences, address) {
      var selectedAddress = address || this.state.selectedAddress;
      var currentState = this.getAddressState(selectedAddress) || (0,external_lodash_.cloneDeep)(this.defaultPreferences);
      var mergedState = _objectSpread(_objectSpread({}, currentState), preferences);
      this.update({
        identities: _objectSpread(_objectSpread({}, this.state.identities), {}, defineProperty_default()({}, selectedAddress, mergedState))
      });
      return mergedState;
    }
  }, {
    key: "headers",
    value: function headers(address) {
      var _this$getAddressState7;
      var selectedAddress = address || this.state.selectedAddress;
      return (0,utils/* getHeaders */.wU)(((_this$getAddressState7 = this.getAddressState(selectedAddress)) === null || _this$getAddressState7 === void 0 ? void 0 : _this$getAddressState7.jwtToken) || "");
    }
  }]);
  return BasePreferencesController;
}(BaseController/* default */.Z);

/***/ }),

/***/ 646:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "F": () => (/* binding */ ACTIVITY_ACTION),
/* harmony export */   "O": () => (/* binding */ ACCOUNT_CATEGORY)
/* harmony export */ });
var ACTIVITY_ACTION = {
  ACTIVITY_ACTION_ALL: "walletActivity.allTransactions",
  ACTIVITY_ACTION_SEND: "walletActivity.send",
  ACTIVITY_ACTION_RECEIVE: "walletActivity.receive",
  ACTIVITY_ACTION_TOPUP: "walletActivity.topup"
};
var ACCOUNT_CATEGORY = {
  NORMAL: "normal",
  THRESHOLD: "threshold",
  IMPORTED: "imported"
};

/***/ }),

/***/ 908:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "i": () => (/* binding */ BaseTransactionStateManager)
/* harmony export */ });
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(628);
/* harmony import */ var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(201);
/* harmony import */ var _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(685);
/* harmony import */ var _babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(627);
/* harmony import */ var _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(840);
/* harmony import */ var _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(528);
/* harmony import */ var _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(195);
/* harmony import */ var _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(793);
/* harmony import */ var lodash__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(758);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(883);
/* harmony import */ var _ITransactionController__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(664);







function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }
function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _babel_runtime_helpers_getPrototypeOf__WEBPACK_IMPORTED_MODULE_5___default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _babel_runtime_helpers_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_4___default()(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }




var BaseTransactionStateManager = /*#__PURE__*/function (_BaseController) {
  _babel_runtime_helpers_inherits__WEBPACK_IMPORTED_MODULE_3___default()(BaseTransactionStateManager, _BaseController);
  var _super = _createSuper(BaseTransactionStateManager);
  function BaseTransactionStateManager(_ref) {
    var _this;
    var config = _ref.config,
      state = _ref.state,
      getCurrentChainId = _ref.getCurrentChainId;
    _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_0___default()(this, BaseTransactionStateManager);
    _this = _super.call(this, {
      config: config,
      state: state
    });
    _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()(_babel_runtime_helpers_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2___default()(_this), "getCurrentChainId", void 0);
    _this.defaultConfig = {
      txHistoryLimit: 40
    };
    _this.defaultState = {
      transactions: {},
      unapprovedTxs: {},
      currentNetworkTxsList: []
    };
    _this.initialize();
    _this.getCurrentChainId = getCurrentChainId;
    return _this;
  }
  _babel_runtime_helpers_createClass__WEBPACK_IMPORTED_MODULE_1___default()(BaseTransactionStateManager, [{
    key: "getUnapprovedTxList",
    value: function getUnapprovedTxList() {
      var chainId = this.getCurrentChainId();
      return (0,lodash__WEBPACK_IMPORTED_MODULE_7__.pickBy)(this.state.transactions, function (transaction) {
        return transaction.status === _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.unapproved */ .LN.unapproved && (0,_utils__WEBPACK_IMPORTED_MODULE_9__/* .transactionMatchesNetwork */ .lw)(transaction, chainId);
      });
    }
  }, {
    key: "getTransaction",
    value: function getTransaction(txId) {
      var transactions = this.state.transactions;
      return transactions[txId];
    }
  }, {
    key: "updateTransaction",
    value: function updateTransaction(txMeta) {
      // commit txMeta to state
      var txId = txMeta.id;
      txMeta.updated_at = new Date().toISOString();
      this.update({
        transactions: _objectSpread(_objectSpread({}, this.state.transactions), {}, _babel_runtime_helpers_defineProperty__WEBPACK_IMPORTED_MODULE_6___default()({}, txId, txMeta))
      });
    }
  }, {
    key: "setTxStatusRejected",
    value: function setTxStatusRejected(txId) {
      this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.rejected */ .LN.rejected);
      this._deleteTransaction(txId);
    }

    /**
     * The implementing controller can override this functionality and add custom logic + call super.()
     */
  }, {
    key: "setTxStatusUnapproved",
    value: function setTxStatusUnapproved(txId) {
      this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.unapproved */ .LN.unapproved);
    }
  }, {
    key: "setTxStatusApproved",
    value: function setTxStatusApproved(txId) {
      this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.approved */ .LN.approved);
    }
  }, {
    key: "setTxStatusSigned",
    value: function setTxStatusSigned(txId) {
      this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.signed */ .LN.signed);
    }
  }, {
    key: "setTxStatusSubmitted",
    value: function setTxStatusSubmitted(txId) {
      this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.submitted */ .LN.submitted);
    }
  }, {
    key: "setTxStatusDropped",
    value: function setTxStatusDropped(txId) {
      this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.dropped */ .LN.dropped);
    }
  }, {
    key: "setTxStatusExpired",
    value: function setTxStatusExpired(txId) {
      this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.expired */ .LN.expired);
    }
  }, {
    key: "setTxStatusConfirmed",
    value: function setTxStatusConfirmed(txId) {
      this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.confirmed */ .LN.confirmed);
    }
  }, {
    key: "setTxStatusFailed",
    value: function setTxStatusFailed(txId, error_) {
      var error = !error_ ? new Error("Internal torus failure") : error_;
      var txMeta = this.getTransaction(txId);
      txMeta.error = error;
      this.updateTransaction(txMeta);
      this._setTransactionStatus(txId, _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.failed */ .LN.failed);
    }

    /**
     * Method to determine if the transaction is in a final state
     * @param status - Transaction status
     * @returns boolean if the transaction is in a final state
     */
  }, {
    key: "isFinalState",
    value: function isFinalState(status) {
      return status === _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.rejected */ .LN.rejected || status === _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.submitted */ .LN.submitted || status === _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.confirmed */ .LN.confirmed || status === _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.failed */ .LN.failed || status === _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.cancelled */ .LN.cancelled || status === _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.expired */ .LN.expired;
    }

    /**
     * Filters out the unapproved transactions from state
     */
  }, {
    key: "clearUnapprovedTxs",
    value: function clearUnapprovedTxs() {
      this.update({
        transactions: (0,lodash__WEBPACK_IMPORTED_MODULE_7__.omitBy)(this.state.transactions, function (transaction) {
          return transaction.status === _ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TransactionStatus.unapproved */ .LN.unapproved;
        })
      });
    }

    /**
     * will append new transactions to old txns.
     */
  }, {
    key: "_addTransactionsToState",
    value: function _addTransactionsToState(transactions) {
      this.update({
        transactions: transactions.reduce(function (result, newTx) {
          result[newTx.id] = newTx;
          return result;
        }, this.state.transactions)
      });
    }

    /**
     * will set new txns, override existing if any in state.
     */
  }, {
    key: "_setTransactionsToState",
    value: function _setTransactionsToState(transactions) {
      this.update({
        transactions: transactions.reduce(function (result, newTx) {
          result[newTx.id] = newTx;
          return result;
        }, {})
      });
    }
  }, {
    key: "_deleteTransaction",
    value: function _deleteTransaction(targetTransactionId) {
      var transactions = this.state.transactions;
      delete transactions[targetTransactionId];
      this.update({
        transactions: transactions
      });
    }
  }, {
    key: "_deleteTransactions",
    value: function _deleteTransactions(targetTransactionIds) {
      var transactions = this.state.transactions;
      targetTransactionIds.forEach(function (transactionId) {
        delete transactions[transactionId];
      });
      this.update({
        transactions: transactions
      });
    }
  }, {
    key: "_setTransactionStatus",
    value: function _setTransactionStatus(txId, status) {
      var txMeta = this.getTransaction(txId);
      if (!txMeta) {
        return;
      }
      txMeta.status = status;
      // only updating status so no validation required on txn.
      this.updateTransaction(txMeta);
      this.emit(_ITransactionController__WEBPACK_IMPORTED_MODULE_10__/* .TX_EVENTS.TX_STATUS_UPDATE */ .RM.TX_STATUS_UPDATE, {
        txId: txId,
        status: status
      });
      if (this.isFinalState(status)) {
        this.emit("".concat(txMeta.id, ":finished"), txMeta);
      } else {
        this.emit("".concat(txMeta.id, ":").concat(status), txId);
      }
    }
  }]);
  return BaseTransactionStateManager;
}(_BaseController__WEBPACK_IMPORTED_MODULE_8__/* ["default"] */ .Z);

/***/ }),

/***/ 664:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "L0": () => (/* binding */ TRANSACTION_TYPES),
/* harmony export */   "LN": () => (/* binding */ TransactionStatus),
/* harmony export */   "RM": () => (/* binding */ TX_EVENTS)
/* harmony export */ });
/**
 * The status of the transaction. Each status represents the state of the transaction internally
 * in the wallet. Some of these correspond with the state of the transaction on the network, but
 * some are wallet-specific.
 */

var TransactionStatus;
(function (TransactionStatus) {
  TransactionStatus["approved"] = "approved";
  TransactionStatus["cancelled"] = "cancelled";
  TransactionStatus["confirmed"] = "confirmed";
  TransactionStatus["failed"] = "failed";
  TransactionStatus["finalized"] = "finalized";
  TransactionStatus["processed"] = "processed";
  TransactionStatus["rejected"] = "rejected";
  TransactionStatus["signed"] = "signed";
  TransactionStatus["submitted"] = "submitted";
  TransactionStatus["unapproved"] = "unapproved";
  TransactionStatus["dropped"] = "dropped";
  TransactionStatus["expired"] = "expired";
})(TransactionStatus || (TransactionStatus = {}));
var TRANSACTION_TYPES = {
  CONTRACT_INTERACTION: "contractInteraction",
  DEPLOY_CONTRACT: "contractDeployment",
  WASM_BASED_DEPLOY: "wasmBasedDeploy",
  STANDARD_TRANSACTION: "transaction",
  STANDARD_PAYMENT_TRANSACTION: "payment_transaction" // specific to chains like solana and casper
};

var TX_EVENTS = {
  TX_WARNING: "tx:warning",
  TX_ERROR: "tx:error",
  TX_FAILED: "tx:failed",
  TX_CONFIRMED: "tx:confirmed",
  TX_DROPPED: "tx:dropped",
  TX_EXPIRED: "tx:expired",
  TX_STATUS_UPDATE: "tx:status_update",
  TX_UNAPPROVED: "tx:unapproved"
};

/***/ }),

/***/ 259:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (/* binding */ createEventEmitterProxy)
/* harmony export */ });
var filterNoop = function filterNoop() {
  return true;
};
var internalEvents = ["newListener", "removeListener"];
var externalEventFilter = function externalEventFilter(name) {
  return !internalEvents.includes(name);
};
function getRawListeners(eventEmitter, name) {
  // prefer native
  return eventEmitter.rawListeners(name);
}
function createEventEmitterProxy(initialTarget, opts) {
  // parse options
  var finalOpts = opts || {};
  var eventFilter = finalOpts.eventFilter || filterNoop;
  if (typeof eventFilter === "string" && eventFilter === "skipInternal") eventFilter = externalEventFilter;
  if (typeof eventFilter !== "function") throw new Error("createEventEmitterProxy - Invalid eventFilter");
  var target = initialTarget;
  var setTarget = function setTarget(newTarget) {
    var oldTarget = target;
    target = newTarget;
    oldTarget.eventNames().filter(eventFilter).forEach(function (name) {
      getRawListeners(oldTarget, name).forEach(function (handler) {
        return newTarget.on(name, handler);
      });
    });

    // remove old listeners
    oldTarget.removeAllListeners();
  };
  var proxy = new Proxy({}, {
    get: function get(_, name) {
      // override `setTarget` access
      if (name === "setTarget") return setTarget;
      return target[name];
    },
    set: function set(_, name, value) {
      // allow `setTarget` overrides
      if (name === "setTarget") {
        setTarget = value;
        return true;
      }
      target[name] = value;
      return true;
    }
  });
  return proxy;
}

/***/ }),

/***/ 868:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (/* binding */ createSwappableProxy)
/* harmony export */ });
function createSwappableProxy(initialTarget) {
  var target = initialTarget;
  var setTarget = function setTarget(newTarget) {
    target = newTarget;
  };
  var proxy = new Proxy({}, {
    get: function get(_, name) {
      // override `setTarget` access
      if (name === "setTarget") return setTarget;
      return target[name];
    },
    set: function set(_, name, value) {
      // allow `setTarget` overrides
      if (name === "setTarget") {
        setTarget = value;
        return true;
      }
      target[name] = value;
      return true;
    }
  });
  return proxy;
}

/***/ }),

/***/ 1:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "$x": () => (/* binding */ BROADCAST_CHANNELS_MSGS),
/* harmony export */   "AA": () => (/* binding */ POPUP_LOADED),
/* harmony export */   "CU": () => (/* binding */ FEATURES_CONFIRM_WINDOW),
/* harmony export */   "EV": () => (/* binding */ POPUP_RESULT),
/* harmony export */   "F1": () => (/* binding */ ACTIVITY_ACTION_ALL),
/* harmony export */   "GA": () => (/* binding */ PROVIDER_JRPC_METHODS),
/* harmony export */   "GI": () => (/* binding */ FEATURES_DEFAULT_WALLET_WINDOW),
/* harmony export */   "HU": () => (/* binding */ ACTIVITY_ACTION_BURN),
/* harmony export */   "Jn": () => (/* binding */ FEATURES_PROVIDER_CHANGE_WINDOW),
/* harmony export */   "K4": () => (/* binding */ ACTIVITY_ACTION_SEND),
/* harmony export */   "Mh": () => (/* binding */ ACTIVITY_PERIOD_WEEK_ONE),
/* harmony export */   "NO": () => (/* binding */ ACTIVITY_PERIOD_MONTH_SIX),
/* harmony export */   "Nb": () => (/* binding */ COMMUNICATION_NOTIFICATIONS),
/* harmony export */   "Of": () => (/* binding */ FEATURES_DEFAULT_POPUP_WINDOW),
/* harmony export */   "P": () => (/* binding */ ACTIVITY_STATUS_CANCELLING),
/* harmony export */   "U": () => (/* binding */ ACTIVITY_PERIOD_MONTH_ONE),
/* harmony export */   "bJ": () => (/* binding */ SETUP_COMPLETE),
/* harmony export */   "eN": () => (/* binding */ ACTIVITY_STATUS_UNSUCCESSFUL),
/* harmony export */   "kl": () => (/* binding */ BROADCAST_CHANNELS),
/* harmony export */   "p": () => (/* binding */ ACTIVITY_STATUS_CANCELLED),
/* harmony export */   "p3": () => (/* binding */ ACTIVITY_ACTION_TOPUP),
/* harmony export */   "qU": () => (/* binding */ ACTIVITY_ACTION_RECEIVE),
/* harmony export */   "rq": () => (/* binding */ ACTIVITY_STATUS_PENDING),
/* harmony export */   "sE": () => (/* binding */ ACTIVITY_PERIOD_ALL),
/* harmony export */   "v": () => (/* binding */ ACTIVITY_STATUS_SUCCESSFUL),
/* harmony export */   "vU": () => (/* binding */ COMMUNICATION_JRPC_METHODS),
/* harmony export */   "zK": () => (/* binding */ PROVIDER_NOTIFICATIONS)
/* harmony export */ });
var FEATURES_PROVIDER_CHANGE_WINDOW = {
  height: 660,
  width: 375
};
var FEATURES_DEFAULT_WALLET_WINDOW = {
  height: 740,
  width: 1315
};
var FEATURES_DEFAULT_POPUP_WINDOW = {
  height: 700,
  width: 1200
};
var FEATURES_CONFIRM_WINDOW = {
  height: 700,
  width: 450
};
var POPUP_LOADED = "popup_loaded";
var POPUP_RESULT = "popup_result";
var SETUP_COMPLETE = "setup_complete";
var ACTIVITY_ACTION_ALL = "walletActivity.allTransactions";
var ACTIVITY_ACTION_SEND = "walletActivity.send";
var ACTIVITY_ACTION_BURN = "walletActivity.burn";
var ACTIVITY_ACTION_RECEIVE = "walletActivity.receive";
var ACTIVITY_ACTION_TOPUP = "walletActivity.topup";
var ACTIVITY_PERIOD_ALL = "walletActivity.all";
var ACTIVITY_PERIOD_WEEK_ONE = "walletActivity.lastOneWeek";
var ACTIVITY_PERIOD_MONTH_ONE = "walletActivity.lastOneMonth";
var ACTIVITY_PERIOD_MONTH_SIX = "walletActivity.lastSixMonts";
var ACTIVITY_STATUS_SUCCESSFUL = "walletActivity.successful";
var ACTIVITY_STATUS_UNSUCCESSFUL = "walletActivity.unsuccessful";
var ACTIVITY_STATUS_PENDING = "walletActivity.pending";
var ACTIVITY_STATUS_CANCELLED = "walletActivity.cancelled";
var ACTIVITY_STATUS_CANCELLING = "walletActivity.cancelling";
var COMMUNICATION_NOTIFICATIONS = {
  IFRAME_STATUS: "iframe_status",
  // Tell embed to create the window
  CREATE_WINDOW: "create_window",
  // Tell embed to close the window
  CLOSE_WINDOW: "close_window",
  USER_LOGGED_IN: "user_logged_in",
  USER_LOGGED_OUT: "user_logged_out"
};
var COMMUNICATION_JRPC_METHODS = {
  LOGOUT: "logout",
  WALLET_INSTANCE_ID: "wallet_instance_id",
  USER_INFO: "user_info",
  SET_PROVIDER: "set_provider",
  TOPUP: "topup",
  IFRAME_STATUS: "iframe_status",
  // embed has opened the window as requested
  OPENED_WINDOW: "opened_window",
  // user has closed the window from embed's side
  CLOSED_WINDOW: "closed_window",
  GET_PROVIDER_STATE: "get_provider_state",
  LOGIN_WITH_PRIVATE_KEY: "login_with_private_key"
};
var PROVIDER_JRPC_METHODS = {
  GET_PROVIDER_STATE: "wallet_get_provider_state"
};
var PROVIDER_NOTIFICATIONS = {
  ACCOUNTS_CHANGED: "wallet_accounts_changed",
  CHAIN_CHANGED: "wallet_chain_changed",
  UNLOCK_STATE_CHANGED: "wallet_unlock_state_changed"
};
var BROADCAST_CHANNELS = {
  REDIRECT_CHANNEL: "redirect_channel",
  PROVIDER_CHANGE_CHANNEL: "torus_provider_change_channel",
  TRANSACTION_CHANNEL: "torus_channel",
  MESSAGE_CHANNEL: "torus_message_channel",
  WALLET_LOGOUT_CHANNEL: "wallet_logout_channel",
  WALLET_SELECTED_ADDRESS_CHANNEL: "wallet_selected_address_channel",
  WALLET_NETWORK_CHANGE_CHANNEL: "wallet_network_change_channel",
  WALLET_ACCOUNT_IMPORT_CHANNEL: "wallet_account_import_channel",
  THEME_CHANGE: "theme_change_channel"
};
var BROADCAST_CHANNELS_MSGS = {
  LOGOUT: "logout",
  ACCOUNT_IMPORTED: "account_imported",
  SELECTED_ADDRESS_CHANGE: "selected_address_change",
  NETWORK_CHANGE: "network_change",
  SET_THEME: "set_theme"
};

/***/ }),

/***/ 850:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "U": () => (/* binding */ PAYMENT_PROVIDER),
/* harmony export */   "h": () => (/* binding */ LOGIN_PROVIDER)
/* harmony export */ });
/**
 * State change callbacks
 */

/**
 * Base controller configuration
 */

/**
 * Base state representation
 */

var LOGIN_PROVIDER = {
  GOOGLE: "google",
  FACEBOOK: "facebook",
  REDDIT: "reddit",
  DISCORD: "discord",
  TWITCH: "twitch",
  APPLE: "apple",
  LINE: "line",
  GITHUB: "github",
  KAKAO: "kakao",
  LINKEDIN: "linkedin",
  TWITTER: "twitter",
  WEIBO: "weibo",
  WECHAT: "wechat",
  EMAIL_PASSWORDLESS: "email_passwordless"
};
/**
 * {@label loginProviderType}
 */

var PAYMENT_PROVIDER = {
  MOONPAY: "moonpay",
  WYRE: "wyre",
  RAMPNETWORK: "rampnetwork",
  XANPOOL: "xanpool",
  MERCURYO: "mercuryo",
  TRANSAK: "transak"
};

/***/ }),

/***/ 883:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "gK": () => (/* reexport */ utils/* UserError */.gK),
  "H9": () => (/* reexport */ utils/* addressSlicer */.H9),
  "aN": () => (/* reexport */ utils/* broadcastChannelOptions */.aN),
  "dk": () => (/* reexport */ utils/* concatSig */.dk),
  "p6": () => (/* reexport */ utils/* formatDate */.p6),
  "d5": () => (/* reexport */ utils/* formatSmallNumbers */.d5),
  "mr": () => (/* reexport */ utils/* formatTime */.mr),
  "Z2": () => (/* reexport */ utils/* getCustomDeviceInfo */.Z2),
  "wU": () => (/* reexport */ utils/* getHeaders */.wU),
  "SL": () => (/* reexport */ utils/* getPopupFeatures */.SL),
  "OG": () => (/* reexport */ getTxStatusText),
  "Kv": () => (/* reexport */ utils/* handleRedirectParameters */.Kv),
  "rj": () => (/* reexport */ utils/* hashMessage */.rj),
  "I4": () => (/* reexport */ utils/* intToHex */.I4),
  "rX": () => (/* reexport */ utils/* padWithZeroes */.rX),
  "kb": () => (/* reexport */ utils/* randomId */.kb),
  "l": () => (/* reexport */ utils/* signMessage */.l),
  "I6": () => (/* reexport */ utils/* significantDigits */.I6),
  "_v": () => (/* reexport */ utils/* sleep */._v),
  "Vs": () => (/* reexport */ utils/* timeout */.Vs),
  "lw": () => (/* reexport */ utils/* transactionMatchesNetwork */.lw)
});

// EXTERNAL MODULE: ./src/enums.ts
var enums = __webpack_require__(1);
;// CONCATENATED MODULE: ./src/utils/txUtils.ts

var getTxStatusText = function getTxStatusText(txStatus) {
  switch (txStatus) {
    case "rejected":
    case "unapproved":
    case "failed":
      return enums/* ACTIVITY_STATUS_UNSUCCESSFUL */.eN;
    case "confirmed":
      return enums/* ACTIVITY_STATUS_SUCCESSFUL */.v;
    case "submitted":
      return enums/* ACTIVITY_STATUS_PENDING */.rq;
    case "cancelled":
      return enums/* ACTIVITY_STATUS_CANCELLED */.p;
    default:
      return "";
  }
};
// EXTERNAL MODULE: ./src/utils/utils.ts + 3 modules
var utils = __webpack_require__(235);
;// CONCATENATED MODULE: ./src/utils/index.ts



/***/ }),

/***/ 235:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "gK": () => (/* binding */ UserError),
  "H9": () => (/* binding */ addressSlicer),
  "aN": () => (/* binding */ broadcastChannelOptions),
  "dk": () => (/* binding */ concatSig),
  "p6": () => (/* binding */ formatDate),
  "d5": () => (/* binding */ formatSmallNumbers),
  "mr": () => (/* binding */ formatTime),
  "Z2": () => (/* binding */ getCustomDeviceInfo),
  "wU": () => (/* binding */ getHeaders),
  "SL": () => (/* binding */ getPopupFeatures),
  "Kv": () => (/* binding */ handleRedirectParameters),
  "rj": () => (/* binding */ hashMessage),
  "I4": () => (/* binding */ intToHex),
  "rX": () => (/* binding */ padWithZeroes),
  "kb": () => (/* binding */ randomId),
  "l": () => (/* binding */ signMessage),
  "I6": () => (/* binding */ significantDigits),
  "_v": () => (/* binding */ sleep),
  "Vs": () => (/* binding */ timeout),
  "lw": () => (/* binding */ transactionMatchesNetwork)
});

// EXTERNAL MODULE: external "@babel/runtime/helpers/createClass"
var createClass_ = __webpack_require__(201);
var createClass_default = /*#__PURE__*/__webpack_require__.n(createClass_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/classCallCheck"
var classCallCheck_ = __webpack_require__(628);
var classCallCheck_default = /*#__PURE__*/__webpack_require__.n(classCallCheck_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/inherits"
var inherits_ = __webpack_require__(627);
var inherits_default = /*#__PURE__*/__webpack_require__.n(inherits_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/possibleConstructorReturn"
var possibleConstructorReturn_ = __webpack_require__(840);
var possibleConstructorReturn_default = /*#__PURE__*/__webpack_require__.n(possibleConstructorReturn_);
// EXTERNAL MODULE: external "@babel/runtime/helpers/getPrototypeOf"
var getPrototypeOf_ = __webpack_require__(528);
var getPrototypeOf_default = /*#__PURE__*/__webpack_require__.n(getPrototypeOf_);
;// CONCATENATED MODULE: external "@babel/runtime/helpers/wrapNativeSuper"
const wrapNativeSuper_namespaceObject = require("@babel/runtime/helpers/wrapNativeSuper");
var wrapNativeSuper_default = /*#__PURE__*/__webpack_require__.n(wrapNativeSuper_namespaceObject);
;// CONCATENATED MODULE: external "bignumber.js"
const external_bignumber_js_namespaceObject = require("bignumber.js");
;// CONCATENATED MODULE: external "ethereumjs-util"
const external_ethereumjs_util_namespaceObject = require("ethereumjs-util");
;// CONCATENATED MODULE: ./src/utils/utils.ts






function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = getPrototypeOf_default()(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = getPrototypeOf_default()(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return possibleConstructorReturn_default()(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }


/**
 * General utility functions
 */

function intToHex(i) {
  var hex = i.toString(16);
  return "0x".concat(hex);
}

/**
 * Returns a random number. Don't use for cryptographic purposes.
 * @returns a random number
 */
var randomId = function randomId() {
  return Math.random().toString(36).slice(2);
};

/**
 * Pads the front of the given hex string with zeroes until it reaches the
 * target length. If the input string is already longer than or equal to the
 * target length, it is returned unmodified.
 *
 * If the input string is "0x"-prefixed or not a hex string, an error will be
 * thrown.
 *
 * @param hexString - The hexadecimal string to pad with zeroes.
 * @param targetLength - The target length of the hexadecimal string.
 * @returns The input string front-padded with zeroes, or the original string
 * if it was already greater than or equal to to the target length.
 */
function padWithZeroes(hexString, targetLength) {
  if (hexString !== "" && !/^[0-9a-f]+$/i.test(hexString)) {
    throw new Error("Expected an unprefixed hex string. Received: ".concat(hexString));
  }
  if (targetLength < 0) {
    throw new Error("Expected a non-negative integer target length. Received: ".concat(targetLength));
  }
  return String.prototype.padStart.call(hexString, targetLength, "0");
}
/**
 * Concatenate an extended ECDSA signature into a hex string.
 *
 * @param v - The 'v' portion of the signature.
 * @param r - The 'r' portion of the signature.
 * @param s - The 's' portion of the signature.
 * @returns The concatenated ECDSA signature.
 */
function concatSig(v, r, s) {
  var rSig = (0,external_ethereumjs_util_namespaceObject.fromSigned)(r);
  var sSig = (0,external_ethereumjs_util_namespaceObject.fromSigned)(s);
  var vSig = (0,external_ethereumjs_util_namespaceObject.bufferToInt)(v);
  var rStr = padWithZeroes((0,external_ethereumjs_util_namespaceObject.toUnsigned)(rSig).toString("hex"), 64);
  var sStr = padWithZeroes((0,external_ethereumjs_util_namespaceObject.toUnsigned)(sSig).toString("hex"), 64);
  var vStr = (0,external_ethereumjs_util_namespaceObject.stripHexPrefix)(intToHex(vSig));
  return (0,external_ethereumjs_util_namespaceObject.addHexPrefix)(rStr.concat(sStr, vStr));
}
function timeout(duration) {
  return new Promise(function (resolve) {
    var timeoutRef = window.setTimeout(function () {
      resolve();
      window.clearTimeout(timeoutRef);
    }, duration);
  });
}
var getHeaders = function getHeaders(jwt) {
  return {
    headers: {
      Authorization: "Bearer ".concat(jwt),
      "Content-Type": "application/json; charset=utf-8"
    }
  };
};

/**
 * Text/number formatting utilities
 */
var formatSmallNumbers = function formatSmallNumbers(number) {
  var currency = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "usd";
  var noTilde = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
  var finalNumber = external_bignumber_js_namespaceObject.BigNumber.isBigNumber(number) ? number.toNumber() : number;
  if (!Number.isFinite(finalNumber)) return "";
  var value = currency.toLowerCase() === "usd" ? parseFloat(Number(finalNumber).toFixed(2)) : parseFloat(Number(finalNumber).toFixed(5));
  var tilde = value > 0 ? "~ " : "";
  return "".concat(currency.toLowerCase() === "usd" || noTilde ? "" : tilde).concat(Number(value), " ").concat(currency.toUpperCase());
};
var addressSlicer = function addressSlicer(address) {
  var sliceLength = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 5;
  if (address.length < 11) {
    return address;
  }
  if (typeof address !== "string") return "";
  return "".concat(address.slice(0, sliceLength), "...").concat(address.slice(-sliceLength));
};
var significantDigits = function significantDigits(number) {
  var perc = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
  var length_ = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 2;
  var input = !external_bignumber_js_namespaceObject.BigNumber.isBigNumber(number) ? new external_bignumber_js_namespaceObject.BigNumber(number) : number;
  if (input.isZero()) return input;
  if (perc) {
    input = input.times(new external_bignumber_js_namespaceObject.BigNumber(100));
  }
  var depth;
  if (input.gte(new external_bignumber_js_namespaceObject.BigNumber(1))) {
    depth = length_;
  } else {
    depth = length_ - 1 + Math.ceil(Math.log10(new external_bignumber_js_namespaceObject.BigNumber("1").div(input).toNumber()));
  }
  var shift = new external_bignumber_js_namespaceObject.BigNumber(10).pow(new external_bignumber_js_namespaceObject.BigNumber(depth));
  var roundedNumber = Math.round(shift.times(input).toNumber()) / shift.toNumber();
  return roundedNumber;
};
var formatDate = function formatDate(inputDate) {
  var monthList = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
  var date = new Date(inputDate);
  var day = date.getDate();
  var month = monthList[date.getMonth()];
  var year = date.getFullYear();
  return "".concat(day, " ").concat(month, " ").concat(year);
};
var formatTime = function formatTime(time) {
  return new Date(time).toTimeString().slice(0, 8);
};

/**
 * Network utilities
 */
var transactionMatchesNetwork = function transactionMatchesNetwork(transaction, chainId) {
  if (typeof transaction.chainId !== "undefined") {
    return transaction.chainId === chainId;
  }
  return false;
};

/**
 * Signing utils
 */
var hashMessage = function hashMessage(message) {
  var bufferedMessage = Buffer.from(message, "utf8");
  var el = (0,external_ethereumjs_util_namespaceObject.hashPersonalMessage)(bufferedMessage);
  return el;
};
var signMessage = function signMessage(privateKey, data) {
  var privKey = Buffer.from(privateKey, "hex");
  var message = (0,external_ethereumjs_util_namespaceObject.stripHexPrefix)(data);
  var msgSig = (0,external_ethereumjs_util_namespaceObject.ecsign)(Buffer.from(message, "hex"), privKey);
  var rawMsgSig = concatSig((0,external_ethereumjs_util_namespaceObject.intToBuffer)(msgSig.v), msgSig.r, msgSig.s);
  return rawMsgSig;
};

/**
 * popup handler utils
 */
function getPopupFeatures(_ref) {
  var w = _ref.width,
    h = _ref.height;
  // Fixes dual-screen position                             Most browsers      Firefox
  var dualScreenLeft = window.screenLeft !== undefined ? window.screenLeft : window.screenX;
  var dualScreenTop = window.screenTop !== undefined ? window.screenTop : window.screenY;
  var width = window.innerWidth ? window.innerWidth : document.documentElement.clientWidth ? document.documentElement.clientWidth : window.screen.width;
  var height = window.innerHeight ? window.innerHeight : document.documentElement.clientHeight ? document.documentElement.clientHeight : window.screen.height;
  var systemZoom = 1; // No reliable estimate

  var left = Math.abs((width - w) / 2 / systemZoom + dualScreenLeft);
  var top = Math.abs((height - h) / 2 / systemZoom + dualScreenTop);
  var features = "titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=".concat(h / systemZoom, ",width=").concat(w / systemZoom, ",top=").concat(top, ",left=").concat(left);
  return features;
}
var broadcastChannelOptions = {
  // type: 'localstorage', // (optional) enforce a type, oneOf['native', 'idb', 'localstorage', 'node']
  webWorkerSupport: false // (optional) set this to false if you know that your channel will never be used in a WebWorker (increases performance)
};

function getCustomDeviceInfo() {
  var _navigator;
  if ((_navigator = navigator) !== null && _navigator !== void 0 && _navigator.brave) {
    return {
      browser: "Brave"
    };
  }
}
var UserError = /*#__PURE__*/function (_Error) {
  inherits_default()(UserError, _Error);
  var _super = _createSuper(UserError);
  function UserError() {
    classCallCheck_default()(this, UserError);
    return _super.apply(this, arguments);
  }
  return createClass_default()(UserError);
}( /*#__PURE__*/wrapNativeSuper_default()(Error));
var handleRedirectParameters = function handleRedirectParameters(hash, queryParameters) {
  var hashParameters = {};
  var hashUrl = new URL("".concat(window.location.origin, "/?").concat(hash.slice(1)));
  hashUrl.searchParams.forEach(function (value, key) {
    hashParameters[key] = value;
  });
  var instanceParameters = {};
  var error = "";
  if (!queryParameters.windowId) {
    if (Object.keys(hashParameters).length > 0 && hashParameters.state) {
      instanceParameters = JSON.parse(window.atob(decodeURIComponent(decodeURIComponent(hashParameters.state)))) || {};
      error = hashParameters.error_description || hashParameters.error || error;
    } else if (Object.keys(queryParameters).length > 0 && queryParameters.state) {
      instanceParameters = JSON.parse(window.atob(decodeURIComponent(decodeURIComponent(queryParameters.state)))) || {};
      if (queryParameters.error) error = queryParameters.error;
    }
  }
  return {
    error: error,
    instanceParameters: instanceParameters,
    hashParameters: hashParameters
  };
};
function sleep(ms) {
  return new Promise(function (resolve) {
    setTimeout(resolve, ms);
  });
}

/***/ }),

/***/ 685:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/assertThisInitialized");

/***/ }),

/***/ 798:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/asyncToGenerator");

/***/ }),

/***/ 628:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/classCallCheck");

/***/ }),

/***/ 201:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/createClass");

/***/ }),

/***/ 195:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/defineProperty");

/***/ }),

/***/ 528:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/getPrototypeOf");

/***/ }),

/***/ 627:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/inherits");

/***/ }),

/***/ 840:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/helpers/possibleConstructorReturn");

/***/ }),

/***/ 650:
/***/ ((module) => {

"use strict";
module.exports = require("@babel/runtime/regenerator");

/***/ }),

/***/ 33:
/***/ ((module) => {

"use strict";
module.exports = require("@toruslabs/openlogin-jrpc");

/***/ }),

/***/ 19:
/***/ ((module) => {

"use strict";
module.exports = require("eth-rpc-errors");

/***/ }),

/***/ 793:
/***/ ((module) => {

"use strict";
module.exports = require("lodash");

/***/ }),

/***/ 485:
/***/ ((module) => {

"use strict";
module.exports = require("loglevel");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ACCOUNT_CATEGORY": () => (/* reexport safe */ _Preferences_IPreferencesController__WEBPACK_IMPORTED_MODULE_18__.O),
/* harmony export */   "ACTIVITY_ACTION": () => (/* reexport safe */ _Preferences_IPreferencesController__WEBPACK_IMPORTED_MODULE_18__.F),
/* harmony export */   "ACTIVITY_ACTION_ALL": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.F1),
/* harmony export */   "ACTIVITY_ACTION_BURN": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.HU),
/* harmony export */   "ACTIVITY_ACTION_RECEIVE": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.qU),
/* harmony export */   "ACTIVITY_ACTION_SEND": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.K4),
/* harmony export */   "ACTIVITY_ACTION_TOPUP": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.p3),
/* harmony export */   "ACTIVITY_PERIOD_ALL": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.sE),
/* harmony export */   "ACTIVITY_PERIOD_MONTH_ONE": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.U),
/* harmony export */   "ACTIVITY_PERIOD_MONTH_SIX": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.NO),
/* harmony export */   "ACTIVITY_PERIOD_WEEK_ONE": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.Mh),
/* harmony export */   "ACTIVITY_STATUS_CANCELLED": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.p),
/* harmony export */   "ACTIVITY_STATUS_CANCELLING": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.P),
/* harmony export */   "ACTIVITY_STATUS_PENDING": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.rq),
/* harmony export */   "ACTIVITY_STATUS_SUCCESSFUL": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.v),
/* harmony export */   "ACTIVITY_STATUS_UNSUCCESSFUL": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.eN),
/* harmony export */   "BROADCAST_CHANNELS": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.kl),
/* harmony export */   "BROADCAST_CHANNELS_MSGS": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.$x),
/* harmony export */   "BaseBlockTracker": () => (/* reexport safe */ _Block_BaseBlockTracker__WEBPACK_IMPORTED_MODULE_1__.I),
/* harmony export */   "BaseController": () => (/* reexport safe */ _BaseController__WEBPACK_IMPORTED_MODULE_0__.Z),
/* harmony export */   "BaseCurrencyController": () => (/* reexport safe */ _Currency_BaseCurrencyController__WEBPACK_IMPORTED_MODULE_4__.W),
/* harmony export */   "BaseEmbedController": () => (/* reexport safe */ _Embed_BaseEmbedController__WEBPACK_IMPORTED_MODULE_5__.k),
/* harmony export */   "BaseKeyringController": () => (/* reexport safe */ _Keyring_BaseKeyringController__WEBPACK_IMPORTED_MODULE_11__.W),
/* harmony export */   "BasePreferencesController": () => (/* reexport safe */ _Preferences_BasePreferencesController__WEBPACK_IMPORTED_MODULE_17__.f),
/* harmony export */   "BaseTransactionStateManager": () => (/* reexport safe */ _Transaction_BaseTransactionStateController__WEBPACK_IMPORTED_MODULE_19__.i),
/* harmony export */   "BroadcastChannelHandler": () => (/* reexport safe */ _Popup_index__WEBPACK_IMPORTED_MODULE_16__.K4),
/* harmony export */   "COMMUNICATION_JRPC_METHODS": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.vU),
/* harmony export */   "COMMUNICATION_NOTIFICATIONS": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.Nb),
/* harmony export */   "CommunicationWindowManager": () => (/* reexport safe */ _Embed_CommunicationWindowManager__WEBPACK_IMPORTED_MODULE_7__.Z),
/* harmony export */   "DEFAULT_PREFERENCES": () => (/* reexport safe */ _Preferences_BasePreferencesController__WEBPACK_IMPORTED_MODULE_17__.a),
/* harmony export */   "FEATURES_CONFIRM_WINDOW": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.CU),
/* harmony export */   "FEATURES_DEFAULT_POPUP_WINDOW": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.Of),
/* harmony export */   "FEATURES_DEFAULT_WALLET_WINDOW": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.GI),
/* harmony export */   "FEATURES_PROVIDER_CHANGE_WINDOW": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.Jn),
/* harmony export */   "LOGIN_PROVIDER": () => (/* reexport safe */ _interfaces__WEBPACK_IMPORTED_MODULE_10__.h),
/* harmony export */   "PAYMENT_PROVIDER": () => (/* reexport safe */ _interfaces__WEBPACK_IMPORTED_MODULE_10__.U),
/* harmony export */   "POPUP_LOADED": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.AA),
/* harmony export */   "POPUP_RESULT": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.EV),
/* harmony export */   "PROVIDER_JRPC_METHODS": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.GA),
/* harmony export */   "PROVIDER_NOTIFICATIONS": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.zK),
/* harmony export */   "PopupHandler": () => (/* reexport safe */ _Popup_index__WEBPACK_IMPORTED_MODULE_16__.XQ),
/* harmony export */   "PopupStoreChannel": () => (/* reexport safe */ _Popup_index__WEBPACK_IMPORTED_MODULE_16__.lQ),
/* harmony export */   "PopupWithBcHandler": () => (/* reexport safe */ _Popup_index__WEBPACK_IMPORTED_MODULE_16__.LC),
/* harmony export */   "RedirectHandler": () => (/* reexport safe */ _Popup_index__WEBPACK_IMPORTED_MODULE_16__.ZZ),
/* harmony export */   "SETUP_COMPLETE": () => (/* reexport safe */ _enums__WEBPACK_IMPORTED_MODULE_9__.bJ),
/* harmony export */   "StreamWindow": () => (/* reexport safe */ _Popup_index__WEBPACK_IMPORTED_MODULE_16__.Ej),
/* harmony export */   "TRANSACTION_TYPES": () => (/* reexport safe */ _Transaction_ITransactionController__WEBPACK_IMPORTED_MODULE_20__.L0),
/* harmony export */   "TX_EVENTS": () => (/* reexport safe */ _Transaction_ITransactionController__WEBPACK_IMPORTED_MODULE_20__.RM),
/* harmony export */   "TransactionStatus": () => (/* reexport safe */ _Transaction_ITransactionController__WEBPACK_IMPORTED_MODULE_20__.LN),
/* harmony export */   "UserError": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.gK),
/* harmony export */   "addressSlicer": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.H9),
/* harmony export */   "broadcastChannelOptions": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.aN),
/* harmony export */   "concatSig": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.dk),
/* harmony export */   "createChangeProviderMiddlewareMiddleware": () => (/* reexport safe */ _Embed_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_6__.JL),
/* harmony export */   "createCommunicationMiddleware": () => (/* reexport safe */ _Embed_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_6__.u_),
/* harmony export */   "createEventEmitterProxy": () => (/* reexport safe */ _createEventEmitterProxy__WEBPACK_IMPORTED_MODULE_2__.Z),
/* harmony export */   "createFetchConfigFromReq": () => (/* reexport safe */ _Network_createFetchMiddleware__WEBPACK_IMPORTED_MODULE_12__.D),
/* harmony export */   "createFetchMiddleware": () => (/* reexport safe */ _Network_createFetchMiddleware__WEBPACK_IMPORTED_MODULE_12__.v),
/* harmony export */   "createGenericJRPCMiddleware": () => (/* reexport safe */ _Embed_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_6__.QM),
/* harmony export */   "createLoggerMiddleware": () => (/* reexport safe */ _Network_createLoggerMiddleware__WEBPACK_IMPORTED_MODULE_13__.y),
/* harmony export */   "createOriginMiddleware": () => (/* reexport safe */ _Network_createOriginMiddleware__WEBPACK_IMPORTED_MODULE_14__.x),
/* harmony export */   "createRandomId": () => (/* reexport safe */ _Network_INetworkController__WEBPACK_IMPORTED_MODULE_15__.HL),
/* harmony export */   "createSwappableProxy": () => (/* reexport safe */ _createSwappableProxy__WEBPACK_IMPORTED_MODULE_3__.Z),
/* harmony export */   "createTopupMiddleware": () => (/* reexport safe */ _Embed_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_6__.yP),
/* harmony export */   "formatDate": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.p6),
/* harmony export */   "formatSmallNumbers": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.d5),
/* harmony export */   "formatTime": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.mr),
/* harmony export */   "getCustomDeviceInfo": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.Z2),
/* harmony export */   "getHeaders": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.wU),
/* harmony export */   "getPopupFeatures": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.SL),
/* harmony export */   "getTxStatusText": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.OG),
/* harmony export */   "handleRedirectParameters": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.Kv),
/* harmony export */   "hashMessage": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.rj),
/* harmony export */   "intToHex": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.I4),
/* harmony export */   "padWithZeroes": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.rX),
/* harmony export */   "providerAsMiddleware": () => (/* reexport safe */ _Network_INetworkController__WEBPACK_IMPORTED_MODULE_15__.zR),
/* harmony export */   "providerFromEngine": () => (/* reexport safe */ _Network_INetworkController__WEBPACK_IMPORTED_MODULE_15__.Xj),
/* harmony export */   "providerFromMiddleware": () => (/* reexport safe */ _Network_INetworkController__WEBPACK_IMPORTED_MODULE_15__.ZY),
/* harmony export */   "randomId": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.kb),
/* harmony export */   "signMessage": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.l),
/* harmony export */   "significantDigits": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.I6),
/* harmony export */   "sleep": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__._v),
/* harmony export */   "timeout": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.Vs),
/* harmony export */   "transactionMatchesNetwork": () => (/* reexport safe */ _utils__WEBPACK_IMPORTED_MODULE_21__.lw)
/* harmony export */ });
/* harmony import */ var _BaseController__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(758);
/* harmony import */ var _Block_BaseBlockTracker__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(781);
/* harmony import */ var _createEventEmitterProxy__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(259);
/* harmony import */ var _createSwappableProxy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(868);
/* harmony import */ var _Currency_BaseCurrencyController__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(79);
/* harmony import */ var _Embed_BaseEmbedController__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(784);
/* harmony import */ var _Embed_CommunicationMethodMiddleware__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(469);
/* harmony import */ var _Embed_CommunicationWindowManager__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(745);
/* harmony import */ var _Embed_IEmbedController__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(818);
/* harmony import */ var _Embed_IEmbedController__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_Embed_IEmbedController__WEBPACK_IMPORTED_MODULE_8__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _Embed_IEmbedController__WEBPACK_IMPORTED_MODULE_8__) if(["default","BaseController","createEventEmitterProxy","createSwappableProxy","CommunicationWindowManager","BaseBlockTracker","BaseCurrencyController","BaseEmbedController","createChangeProviderMiddlewareMiddleware","createCommunicationMiddleware","createGenericJRPCMiddleware","createTopupMiddleware"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _Embed_IEmbedController__WEBPACK_IMPORTED_MODULE_8__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);
/* harmony import */ var _enums__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(1);
/* harmony import */ var _interfaces__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(850);
/* harmony import */ var _Keyring_BaseKeyringController__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(608);
/* harmony import */ var _Network_createFetchMiddleware__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(466);
/* harmony import */ var _Network_createLoggerMiddleware__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(994);
/* harmony import */ var _Network_createOriginMiddleware__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(152);
/* harmony import */ var _Network_INetworkController__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(168);
/* harmony import */ var _Popup_index__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(964);
/* harmony import */ var _Preferences_BasePreferencesController__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(81);
/* harmony import */ var _Preferences_IPreferencesController__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(646);
/* harmony import */ var _Transaction_BaseTransactionStateController__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(908);
/* harmony import */ var _Transaction_ITransactionController__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(664);
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(883);


























})();

module.exports = __webpack_exports__;
/******/ })()
;
//# sourceMappingURL=baseControllers.cjs.js.map